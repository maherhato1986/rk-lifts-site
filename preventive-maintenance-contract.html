<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø© ÙˆÙ‚Ø§Ø¦ÙŠØ© Ù„Ù„Ù…ØµØ§Ø¹Ø¯</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Cairo,Arial;background:#f3f4f6;margin:0}
.container{max-width:1100px;margin:20px auto;background:#fff;padding:30px}
h2{margin-top:0}
.section{margin-bottom:30px;border-bottom:1px dashed #e5e7eb;padding-bottom:20px}
label{font-weight:600;font-size:14px}
input,select,textarea{
  width:100%;padding:8px;margin-top:6px;
  border:1px solid #d1d5db;border-radius:8px
}
textarea{min-height:70px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px}
button{
  background:#059669;color:#fff;border:none;
  padding:10px 20px;border-radius:8px;
  cursor:pointer;font-size:14px
}
button.secondary{background:#6b7280}
.review-box{background:#f9fafb;padding:20px;border-radius:10px}
@media print{
  body{background:#fff}
  .no-print{display:none}
}
</style>
</head>

<body>
<div class="container">

<h2>Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø© ÙˆÙ‚Ø§Ø¦ÙŠØ© Ù„Ù„Ù…ØµØ§Ø¹Ø¯</h2>

<!-- ================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ ================== -->
<div class="section">
<h3>Ø£ÙˆÙ„Ø§Ù‹: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
<div id="customerInfo"></div>
</div>

<!-- ================== Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ù‚Ø¯ ================== -->
<div class="section">
<h3>Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¹Ù†Ø§ØµØ± Ø¹Ù‚Ø¯ Ø§Ù„ØµÙŠØ§Ù†Ø©</h3>

<div class="grid">
  <div>
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
    <input id="lifts" type="number">
  </div>

  <div>
    <label>Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ¹Ø¯ (ÙƒØ¬Ù…)</label>
    <select id="capacity">
      <option value="3000">150 â€“ 320</option>
      <option value="3500">350 â€“ 550</option>
      <option value="4000">600 â€“ 900</option>
      <option value="4500">901 â€“ 1100</option>
      <option value="5000">1101 â€“ 1500</option>
      <option value="5500">1501 â€“ 1750</option>
    </select>
  </div>

  <div>
    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø·ÙˆØ§Ø¨Ù‚</label>
    <input id="floors" type="number">
  </div>

  <div>
    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰</label>
    <select id="building">
      <option value="private">Ø®Ø§Øµ</option>
      <option value="government">Ø­ÙƒÙˆÙ…ÙŠ</option>
    </select>
  </div>

  <div>
    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ¹Ø¯</label>
    <select id="brandType">
      <option value="normal">Ø¹Ø§Ø¯ÙŠ</option>
      <option value="global">Ø¹Ø§Ù„Ù…ÙŠ (Otis / KONE / Mitsubishi / Schindler)</option>
    </select>
  </div>
</div>

<label style="margin-top:15px">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
<textarea id="notes"></textarea>

<button class="no-print" onclick="reviewContract()">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù‚Ø¯</button>
</div>

<!-- ================== Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ================== -->
<div class="section" id="reviewSection" style="display:none">
<h3>Ø«Ø§Ù„Ø«Ø§Ù‹: Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù‚Ø¯</h3>

<div class="review-box" id="reviewBox"></div>

<button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© / PDF</button>
</div>

</div>

<script>
let customer = null;

document.addEventListener('DOMContentLoaded',()=>{
  const saved = localStorage.getItem('rkl_selected_customer');
  if(!saved){alert('Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„');return;}
  customer = JSON.parse(saved);

  document.getElementById('customerInfo').innerHTML = `
    <p><b>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</b> ${customer.customer_name}</p>
    <p><b>Ø§Ù„Ø¬ÙˆØ§Ù„:</b> ${customer.mobile}</p>
    <p><b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${customer.city} â€“ ${customer.full_address||''}</p>
  `;
});

function reviewContract(){
  let price = Number(document.getElementById('capacity').value);
  const lifts = Number(document.getElementById('lifts').value || 1);
  const floors = Number(document.getElementById('floors').value || 1);
  const building = document.getElementById('building').value;
  const brandType = document.getElementById('brandType').value;

  if(floors > 2) price *= 1.10;
  if(building === 'government') price *= 1.50;
  if(brandType === 'global') price += 2000;

  const total = price * lifts;

  document.getElementById('reviewBox').innerHTML = `
    <p><b>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${lifts}</p>
    <p><b>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø³Ù†ÙˆÙŠ Ù„Ù„Ù…ØµØ¹Ø¯:</b> ${price.toFixed(2)} Ø±ÙŠØ§Ù„</p>
    <p><b>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù‚Ø¯:</b> <strong>${total.toFixed(2)} Ø±ÙŠØ§Ù„</strong></p>
    <p><b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b> ${document.getElementById('notes').value || 'â€”'}</p>
  `;

  document.getElementById('reviewSection').style.display='block';
}
</script>

</body>
</html>
