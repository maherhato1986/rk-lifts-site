<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© - RKL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Open Graph for WhatsApp (Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§) -->
<meta property="og:title" content="RKL Ù„Ù„Ù…ØµØ§Ø¹Ø¯ | Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø±Ø³Ù…ÙŠ">
<meta property="og:description" content="Ù†Ù…ÙˆØ°Ø¬ Ø±Ø³Ù…ÙŠ Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·Ù„Ø¨Ø§Øª ØµÙŠØ§Ù†Ø© ÙˆØªÙˆØ±ÙŠØ¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯ Ù„Ø¯Ù‰ Ù…Ø¤Ø³Ø³Ø©  RKL. Ø·Ù„Ø¨Ùƒ Ù…ÙˆØ«Ù‚ ÙˆÙŠØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙ†ÙŠØ©.">
<meta property="og:image" content="https://rkl.sa/public/images/logo.png">
<meta property="og:url" content="https://rkl.sa/quote-request.html">
<meta property="og:type" content="website">

<!-- Twitter (Ø§Ø­ØªÙŠØ§Ø·ÙŠ) -->
<meta name="twitter:card" content="summary_large_image">

<style>
  html, body {
  direction: rtl;
  text-align: right;
}
label {
  text-align: right;
}

input, select, textarea {
  text-align: right;
}

.form-title{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  font-size:22px;
  font-weight:700;
  color:#0f172a;
  margin:25px 0;
  direction: rtl;
}


.form-title img{
  width:42px;
}
.intro-box{
  background:linear-gradient(135deg,#f9fafb,#eef2ff);
  border:1px solid #e0e7ff;
  border-radius:16px;
  padding:24px;
  margin-bottom:30px;
}

.intro-header h1{
  font-size:20px;
  font-weight:700;
}

.intro-features li{
  position:relative;
  padding-right:20px;
}

.intro-features{
  list-style:none;
  padding:0;
  margin:0;
}

.intro-features li{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:8px;
  color:#0f172a;
}

.intro-features li span{
  color:#4f46e5;
  font-weight:bold;
}


      .intro-box{
  background:#f8fafc;
  border:1px solid #e5e7eb;
  border-radius:12px;
  padding:20px;
  margin-bottom:25px;
}

.intro-header{
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:10px;
}

.intro-logo{
  width:70px;
  height:auto;
}

.intro-header h1{
  font-size:18px;
  margin:0;
  color:#0f172a;
}

.intro-text{
  color:#334155;
  line-height:1.8;
  margin-bottom:10px;
}

.intro-features{
  padding-right:18px;
  color:#0f172a;
}

.intro-features li{
  margin-bottom:6px;
}

body{
  font-family: 'Cairo', sans-serif;
  background: linear-gradient(180deg,#eef2f7,#f8fafc);
}

.container{
  max-width:900px;
  margin:40px auto;
  background:#ffffff;
  padding:35px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

h2{text-align:center;margin-bottom:10px}
label{font-weight:600;margin-top:12px;display:block}
input,select,textarea{
  width:100%;
  padding:12px 14px;
  margin-top:6px;
  border-radius:10px;
  border:1px solid #d1d5db;
  background:#f9fafb;
  transition:0.2s;
}

input:focus,
select:focus,
textarea:focus{
  outline:none;
  border-color:#4f46e5;
  background:#fff;
  box-shadow:0 0 0 3px rgba(79,70,229,0.15);
}
button{
  margin-top:30px;
  width:100%;
  background:linear-gradient(135deg,#4f46e5,#6366f1);
  color:#fff;
  border:none;
  padding:16px;
  font-size:17px;
  font-weight:700;
  border-radius:14px;
  cursor:pointer;
  transition:0.2s;
}

button:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 20px rgba(79,70,229,0.35);
}
.section{
  margin-top:30px;
  padding-top:20px;
  border-top:1px dashed #e5e7eb;
}

  .hidden { display: none !important; }


.summary{background:#f9fafb;padding:15px;border-radius:8px;margin-top:20px}
</style>
</head>

<body>
<form action="https://formsubmit.co/admin@rkl.sa"
      method="POST"
      enctype="multipart/form-data"
      onsubmit="prepareBeforeSubmit();">
<div class="container">
      <!-- ===== Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ø¤Ø³Ø³Ø© ===== -->
<div class="intro-box">
  <div class="intro-header">
    <img src="https://rkl.sa/public/images/logo.png" alt="RKL Logo" class="intro-logo">
    <h1> RKL Ù„Ù„Ù…ØµØ§Ø¹Ø¯ ÙˆØ§Ù„Ø³Ù„Ø§Ù„Ù… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</h1>
  </div>

<p class="intro-text">
Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ø®ØµØµ Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·Ù„Ø¨Ø§Øª
<strong>Ø§Ù„ØµÙŠØ§Ù†Ø©ØŒ Ø§Ù„ØªÙˆØ±ÙŠØ¯ØŒ ÙˆØ§Ù„ØªØ±ÙƒÙŠØ¨</strong>
Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆÙ…Ù†Ø¸Ù…ØŒ Ø¨Ù…Ø§ ÙŠØ¶Ù…Ù† Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© ÙˆØ¯Ù‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙÙ†ÙŠ.
</p>


<ul class="intro-features">
  <li><span>âœ”</span> ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø±Ù‚Ù… Ù…Ø±Ø¬Ø¹ÙŠ Ø±Ø³Ù…ÙŠ</li>
  <li><span>âœ”</span> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙ†ÙŠØ©</li>
  <li><span>âœ”</span> Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„ÙÙˆØ±ÙŠ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</li>
  <li><span>âœ”</span> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø³Ø±ÙŠØ© ØªØ§Ù…Ø©</li>
</ul>

</div>


  <img src="https://rkl.sa/public/images/logo.png" alt="RKL" style="width:40px">
  Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©
</h2>

<input type="hidden" name="_template" value="box">

<input type="hidden" name="_blacklist" value="*">
<input type="hidden" id="request_type" name="request_type" value="">

<!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
<div class="section">
<label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
<input id="name">


<label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…ØªÙˆÙØ±Ù‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙÙ‚Ø·)</label>
<input id="phone" placeholder="05XXXXXXXX" required>
  <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø­ØªÙ‰ ÙŠØµÙ„Ùƒ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø±Ø³Ù„)</label>
<input id="email" name="email" placeholder="example@email.com" required>




<select id="type" onchange="toggleType()">
  <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</option>
  <option value="maintenance">ØµÙŠØ§Ù†Ø© Ù…ØµØ§Ø¹Ø¯</option>
  <option value="supply">ØªÙˆØ±ÙŠØ¯ ÙˆØªØ±ÙƒÙŠØ¨ Ù…ØµØ§Ø¹Ø¯</option>
  <option value="consult">Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ‚Ø·</option>
</select>



<div id="contractQuestion" style="display:none">

  <label>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø¯ Ù…Ø¹Ù†Ø§ØŸ</label>
  <select id="hasContract" onchange="toggleContractFlow()">
    <option value="">Ø§Ø®ØªØ±</option>
    <option value="yes">Ù†Ø¹Ù…</option>
    <option value="no">Ù„Ø§</option>
  </select>
</div>



<div id="withContract" style="display:none">

  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ / Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
  <input type="text" name="project_name">

  <label>  Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ù„Ø§Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
  <select name="issue_type">
    <option>ØµÙŠØ§Ù†Ø© Ø¯ÙˆØ±ÙŠØ©</option>
    <option>Ø¹Ø·Ù„ Ù…ÙØ§Ø¬Ø¦</option>
    <option>Ø§Ø­ØªØ¬Ø§Ø²</option>
    <option>Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„</option>
  </select>

  <label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯</label>
  <select name="lift_status">
    
    <option>ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ù…Ù„Ø§Ø­Ø¸Ø§Øª</option>
    <option>Ù…ØªÙˆÙ‚Ù</option>
  </select>

  <label>Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨</label>
  <select name="priority">
    <option>Ø¹Ø§Ø¯ÙŠ</option>
    <option>Ø¹Ø§Ø¬Ù„</option>
    <option>Ø·Ø§Ø±Ø¦</option>
  </select>

  <label>ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„</label>
  <textarea name="description_contract"></textarea>


<label>Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ± / Ù…Ø®Ø·Ø·</label>
<input
  type="file"
  name="attachments"
  accept="image/*,application/pdf"
  multiple>





</div>


<div id="withoutContract" style="display:none">

  <label>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
  <select name="service_type" id="serviceType" onchange="toggleVisits()">

    
    <option>Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø²ÙŠØ§Ø±Ø© Ù„Ù…Ø±Ù‡ ÙˆØ§Ø­Ø¯Ø©</option>
    <option>Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø© ÙˆÙ‚Ø§Ø¦ÙŠØ© Ø³Ù†ÙˆÙŠ</option>
  </select>
      <label id="visitsLabel" style="display:none">Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</label>
<select name="maintenance_visits" id="maintenanceVisits" style="display:none">
  <option value="">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</option>
  <option value="12">12 Ø²ÙŠØ§Ø±Ø© Ø³Ù†ÙˆÙŠØ©</option>
  <option value="6">6 Ø²ÙŠØ§Ø±Ø§Øª Ø³Ù†ÙˆÙŠØ©</option>
</select>


  <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
  <input type="number" name="lifts_count">
  <label>Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª (Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)</label>
<input type="number" name="stops_count" placeholder="Ù…Ø«Ø§Ù„: 10">

<label>Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ¹Ø¯ (ÙƒØ¬Ù…)</label>
<select name="capacity">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ù…ÙˆÙ„Ø©</option>
  <option>450</option>
  <option>630</option>
  <option>800</option>
  <option>1000</option>
  <option>1600</option>
</select>

<label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰</label>
<select name="building_type">
  <option value="">Ø§Ø®ØªØ±</option>
  <option>Ø³ÙƒÙ†ÙŠ</option>
  <option>Ø­ÙƒÙˆÙ…ÙŠ</option>
</select>


<label>Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
<select name="lift_brand">
  <option>ÙÙˆØ¬ÙŠ</option>
  <option>Ø´Ù†Ø¯Ù„Ø±</option>
  <option>ÙˆÙŠØªÙˆØ±</option>
  <option>Ø§ÙˆØªÙŠØ³</option>
  <option>ØªØ¬Ù…ÙŠØ¹ Ù…Ø­Ù„ÙŠ</option>
  <option>Ù„Ø§ Ø§Ø¹Ø±Ù</option>
</select>

<label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯</label>
<select name="lift_condition">
  <option>ÙŠØ¹Ù…Ù„</option>
  <option>Ù…ØªÙˆÙ‚Ù</option>
  <option>Ø¨Ù‡ Ù…Ø´Ø§ÙƒÙ„</option>
</select>


  <label>Ø§Ù„Ø¹Ù…Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…ØµØ¹Ø¯</label>
  <select name="lift_age">
    <option>Ø£Ù‚Ù„ Ù…Ù† 5 Ø³Ù†ÙˆØ§Øª</option>
    <option>5 â€“ 10 Ø³Ù†ÙˆØ§Øª</option>
    <option>Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª</option>
  </select>
<label>Ø±ÙØ¹ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
<small style="color:#666;">
ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„ÙƒØ§Ø¨ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ Ø£Ùˆ Ù„ÙˆØ­Ø© Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ Ø¯Ø§Ø®Ù„ ØºØ±ÙØ© Ø§Ù„Ù…ÙƒÙŠÙ†Ø© (Ø¥Ù† ÙˆØ¬Ø¯Øª)ØŒ  
ÙˆØ°Ù„Ùƒ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙ†Ø§ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…  Ø¨Ø´ÙƒÙ„ Ø£Ø¯Ù‚.
</small>


  <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…ØµØ§Ø¹Ø¯ </label>
  <textarea name="description_no_contract"></textarea>

</div>



<div id="mapSection">
  <label>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
  <input type="text" id="location" readonly>
  <div id="map" style="height:300px;border-radius:8px;margin-top:10px;"></div>
</div>








<!-- ØªÙˆØ±ÙŠØ¯ -->
<div id="supply" class="section hidden">
<label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
<input id="project" name="project_name">


<label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰</label>
<select name="building_type_supply">
  <option>Ø³ÙƒÙ†ÙŠ</option>
  <option>ØªØ¬Ø§Ø±ÙŠ</option>
  <option>Ù…Ø³ØªØ´ÙÙ‰</option>
</select>

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
<input type="number" name="lifts_count_supply">

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±</label>
<input type="number" name="floors_count_supply">

<b>ğŸ“ Ù…Ø®Ø·Ø· Ù…Ø±ÙÙ‚:</b> Ù†Ø¹Ù… (ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨)



<label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
<textarea name="supply_notes"></textarea>

</div>

<!-- Ù…Ù„Ø®Øµ -->
<div class="section">
<button type="button" onclick="showSummary()">
ğŸ“‹ Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨
</button>

<div id="summaryBox" class="summary hidden"></div>
</div>

<button type="submit">
ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
</button>


<input type="hidden" name="Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨" id="request_id">


  <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª FormSubmit -->
<input type="hidden" name="_subject"
value="ğŸ“© Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯ â€“ RKL | {{Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨}}">


  <input type="hidden" name="_captcha" value="false">


  <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ -->
<input type="hidden" name="Ù…ÙˆÙ‚Ø¹_Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" id="location_hidden">


  <!-- Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (ÙŠØ¸Ù‡Ø± ÙƒÙ†Øµ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ø¯ÙˆÙ„) -->
  <input type="hidden" name="_language" value="ar">

  <!-- Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù„Ù„Ø¹Ù…ÙŠÙ„ -->
  <input type="hidden" name="_cc" id="cc_email">

<input type="hidden" name="Ù…Ù„Ø®Øµ_Ø§Ù„Ø·Ù„Ø¨_Ø§Ù„ÙƒØ§Ù…Ù„" id="full_summary">

</form>




<p style="font-size:13px;color:#777;margin-top:10px;text-align:center;">
ğŸ”’ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø³Ø±ÙŠØ© ØªØ§Ù…Ø© ÙˆÙ„Ù† ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ø¥Ù„Ø§ Ù„ØºØ±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø©.
</p>

</div>
<script>
/* =========================
   Globals
========================= */
let map, marker;
window.__rklMapInitialized = false;

/* =========================
   Helpers
========================= */
function v(id){
  return (document.getElementById(id)?.value ?? "â€”").toString().trim() || "â€”";
}
function vn(name){
  return (document.querySelector(`[name="${name}"]`)?.value ?? "â€”").toString().trim() || "â€”";
}

/* =========================
   Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
========================= */
function hideAllSections() {
  const ids = ["withContract","withoutContract","supply","mapSection"];
  ids.forEach(i => {
    const el = document.getElementById(i);
    if (el) el.style.display = "none";
  });
}

/* =========================
   Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯ØŸ
========================= */
function toggleContractFlow() {
  const val = document.getElementById("hasContract")?.value || "";
  const withC = document.getElementById("withContract");
  const withoutC = document.getElementById("withoutContract");
  if (withC) withC.style.display = "none";
  if (withoutC) withoutC.style.display = "none";

  if (val === "yes" && withC) withC.style.display = "block";
  if (val === "no"  && withoutC) withoutC.style.display = "block";
}

/* =========================
   Google Map
========================= */
function initMap() {
  const mapEl = document.getElementById("map");
  if (!mapEl) return;

  const defaultLocation = { lat: 24.7136, lng: 46.6753 };

  map = new google.maps.Map(mapEl, {
    center: defaultLocation,
    zoom: 12
  });

  window.map = map;
  window.__rklMapInitialized = true;

  map.addListener("click", function (e) {
    if (marker) marker.setMap(null);

    marker = new google.maps.Marker({
      position: e.latLng,
      map: map
    });

    document.getElementById("location").value =
      `https://maps.google.com/?q=${e.latLng.lat()},${e.latLng.lng()}`;
  });
}

/* =========================
   Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨
========================= */
function toggleType() {
  const type = document.getElementById("type")?.value || "";
  document.getElementById("request_type").value = type;

  hideAllSections();

  // Ø¥Ø®ÙØ§Ø¡ Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ù‚Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
  const cq = document.getElementById("contractQuestion");
  if (cq) cq.style.display = "none";
  const hasC = document.getElementById("hasContract");
  if (hasC) hasC.value = "";

  const showMapAndFix = () => {
    const ms = document.getElementById("mapSection");
    if (ms) ms.style.display = "block";

    setTimeout(() => {
      if (!window.__rklMapInitialized) {
        // Ø¥Ø°Ø§ Google Ø§Ø³ØªØ¯Ø¹Øª initMap Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ¸Ù‡Ø± Ø§Ù„Ù‚Ø³Ù…ØŒ Ø£Ø¹Ø¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¢Ù†
        try { initMap(); } catch(e) {}
      } else if (window.google?.maps && window.map) {
        google.maps.event.trigger(window.map, "resize");
        try { window.map.setCenter(window.map.getCenter()); } catch(e) {}
      }
    }, 250);
  };

  if (type === "maintenance") {
    if (cq) cq.style.display = "block";
    showMapAndFix();
  }

  if (type === "supply") {
    const supply = document.getElementById("supply");
    if (supply) supply.style.display = "block";
    showMapAndFix();
  }

  if (type === "consult") {
    alert("ğŸ“ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ†ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©");
  }
}

/* =========================
   Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª (Ù„Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ)
========================= */
function toggleVisits() {
  const service = document.getElementById("serviceType")?.value || "";
  const visitsSelect = document.getElementById("maintenanceVisits");
  const visitsLabel = document.getElementById("visitsLabel");

  if (!visitsSelect || !visitsLabel) return;

  if (service.includes("Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø©")) {
    visitsSelect.style.display = "block";
    visitsLabel.style.display = "block";
  } else {
    visitsSelect.style.display = "none";
    visitsLabel.style.display = "none";
    visitsSelect.value = "";
  }
}

/* =========================
   Ø¨Ù†Ø§Ø¡ Ù…Ù„Ø®Øµ ÙƒØ§Ù…Ù„ (HTML + Text)
========================= */
function buildFullSummary() {
  const reqType = v("type");          // maintenance | supply | consult
  const hasContract = v("hasContract");
  const location = v("location");

  const typeLabel =
    reqType === "maintenance" ? "ØµÙŠØ§Ù†Ø© Ù…ØµØ§Ø¹Ø¯" :
    reqType === "supply" ? "ØªÙˆØ±ÙŠØ¯ ÙˆØªØ±ÙƒÙŠØ¨ Ù…ØµØ§Ø¹Ø¯" :
    reqType === "consult" ? "Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ‚Ø·" : "â€”";

  let detailsHtml = "";
  let detailsText = "";

  // ØªÙˆØ±ÙŠØ¯
  if (reqType === "supply") {
    detailsHtml = `
      <b>ğŸ—ï¸ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙˆØ±ÙŠØ¯:</b><br>
      <b>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b> ${v("project")}<br>
      <b>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${vn("building_type_supply")}<br>
      <b>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${vn("lifts_count_supply")}<br>
      <b>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±:</b> ${vn("floors_count_supply")}<br>
      <b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${vn("supply_notes")}
    `;
    detailsText =
`ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙˆØ±ÙŠØ¯:
- Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${v("project")}
- Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰: ${vn("building_type_supply")}
- Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯: ${vn("lifts_count_supply")}
- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±: ${vn("floors_count_supply")}
- Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${vn("supply_notes")}`;
  }

  // ØµÙŠØ§Ù†Ø©
  if (reqType === "maintenance") {
    if (hasContract === "yes") {
      detailsHtml = `
        <b>ğŸ§¾ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯):</b><br>
        <b>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹/Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b> ${vn("project_name")}<br>
        <b>Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ø§Øº:</b> ${vn("issue_type")}<br>
        <b>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${vn("lift_status")}<br>
        <b>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</b> ${vn("priority")}<br>
        <b>ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„:</b><br>${vn("description_contract")}
      `;
      detailsText =
`ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯):
- Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹/Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${vn("project_name")}
- Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ø§Øº: ${vn("issue_type")}
- Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯: ${vn("lift_status")}
- Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${vn("priority")}
- ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„: ${vn("description_contract")}`;
    }

    if (hasContract === "no") {
      const serviceType = vn("service_type");
      const visits = vn("maintenance_visits");
      const visitsHtml = (serviceType.includes("Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø©") && visits !== "â€”") ? `<b>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©:</b> ${visits}<br>` : "";
      const visitsText = (serviceType.includes("Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø©") && visits !== "â€”") ? `- Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©: ${visits}\n` : "";

      detailsHtml = `
        <b>ğŸ§¾ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯):</b><br>
        <b>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${serviceType}<br>
        ${visitsHtml}
        <b>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${vn("lifts_count")}<br>
        <b>Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª:</b> ${vn("stops_count")}<br>
        <b>Ø§Ù„Ø­Ù…ÙˆÙ„Ø© (ÙƒØ¬Ù…):</b> ${vn("capacity")}<br>
        <b>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${vn("building_type")}<br>
        <b>Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${vn("lift_brand")}<br>
        <b>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${vn("lift_condition")}<br>
        <b>Ø§Ù„Ø¹Ù…Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ:</b> ${vn("lift_age")}<br>
        <b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${vn("description_no_contract")}
      `;
      detailsText =
`ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø© (Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯):
- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©: ${serviceType}
${visitsText}- Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯: ${vn("lifts_count")}
- Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª: ${vn("stops_count")}
- Ø§Ù„Ø­Ù…ÙˆÙ„Ø© (ÙƒØ¬Ù…): ${vn("capacity")}
- Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰: ${vn("building_type")}
- Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯: ${vn("lift_brand")}
- Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯: ${vn("lift_condition")}
- Ø§Ù„Ø¹Ù…Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ: ${vn("lift_age")}
- Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${vn("description_no_contract")}`.replace(/\n\n/g,"\n");
    }
  }

  const headerHtml = `
    <b>ğŸ§‘â€ğŸ’¼ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:</b><br>
    <b>Ø§Ù„Ø§Ø³Ù…:</b> ${v("name")}<br>
    <b>Ø§Ù„Ø¬ÙˆØ§Ù„:</b> ${v("phone")}<br>
    <b>Ø§Ù„Ø¨Ø±ÙŠØ¯:</b> ${v("email")}<br>
    <b>Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</b> ${typeLabel}<br>
    <b>Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯ØŸ</b> ${reqType === "maintenance" ? (hasContract === "yes" ? "Ù†Ø¹Ù…" : hasContract === "no" ? "Ù„Ø§" : "â€”") : "â€”"}<br>
    <b>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b> ${location}<br><br>
  `;

  const headerText =
`Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:
- Ø§Ù„Ø§Ø³Ù…: ${v("name")}
- Ø§Ù„Ø¬ÙˆØ§Ù„: ${v("phone")}
- Ø§Ù„Ø¨Ø±ÙŠØ¯: ${v("email")}
- Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${typeLabel}
- Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯ØŸ ${reqType === "maintenance" ? (hasContract === "yes" ? "Ù†Ø¹Ù…" : hasContract === "no" ? "Ù„Ø§" : "â€”") : "â€”"}
- Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${location}`;

  return {
    typeLabel,
    html: headerHtml + (detailsHtml || "<b>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:</b> â€”"),
    text: headerText + "\n\n" + (detailsText || "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨: â€”")
  };
}

/* =========================
   Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨ + ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ù…Ø®ÙÙŠ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
========================= */
function showSummary() {
  const summary = buildFullSummary();

  const box = document.getElementById("summaryBox");
  if (box) {
    box.innerHTML = summary.html;
    box.classList.remove("hidden");
  }

  const hidden = document.getElementById("full_summary");
  if (hidden) hidden.value = summary.text;
}


/* =========================
   FormSubmit + WhatsApp (Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„)
========================= */
function prepareBeforeSubmit() {
  // Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
  const reqId = generateRequestId();
  document.getElementById("request_id").value = reqId;

  // Ù…Ù„Ø®Øµ ÙƒØ§Ù…Ù„ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„ + ÙˆØ§Ø¬Ù‡Ø©
  showSummary();

  // Ù†Ø³Ø®Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„
  document.getElementById("cc_email").value = v("email");

  // Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ø¹Ù…ÙŠÙ„
  setTimeout(() => {
    sendWhatsAppToClient(reqId);
  }, 350);

  // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© (Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª)
  stripAllNamesExceptSummary();
}

/* =========================
   WhatsApp
========================= */
function normalizeSaudiPhone(phone) {
  phone = (phone || "").toString().replace(/\D/g, '');
  if (phone.startsWith('05')) return '966' + phone.substring(1);
  if (phone.startsWith('5')) return '966' + phone;
  if (phone.startsWith('966')) return phone;
  return '';
}

function sendWhatsAppToClient(forcedReqId) {
  const phone = normalizeSaudiPhone(v("phone"));
  if (!phone) return;

  const reqId = forcedReqId || v("request_id");
  const summary = buildFullSummary();

  const msg =
`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${v("name")} ğŸ‘‹
ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ù„Ø¯Ù‰ *RKL Ù„Ù„Ù…ØµØ§Ø¹Ø¯* âœ…

ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${reqId}
ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${summary.typeLabel}

ğŸ“Œ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨:
${summary.text}

ğŸ“ ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±/Ø§Ù„Ù…Ø®Ø·Ø· Ù…Ø¹ Ø°ÙƒØ± Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰: 0114774021 Ø£Ùˆ admin@rkl.sa`;

  window.open("https://wa.me/" + phone + "?text=" + encodeURIComponent(msg), "_blank");
}

/* =========================
   Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
========================= */
function generateRequestId() {
  const now = new Date();
  const y = now.getFullYear().toString().slice(2);
  const m = String(now.getMonth() + 1).padStart(2, '0');
  const d = String(now.getDate()).padStart(2, '0');
  const r = Math.floor(Math.random() * 900 + 100);
  return `RKL-${y}${m}${d}-${r}`;
}




/* =========================
   Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
========================= */
document.addEventListener("DOMContentLoaded", () => {
  hideAllSections();
  const cq = document.getElementById("contractQuestion");
  if (cq) cq.style.display = "none";
});
</script>



<script>
function showSummary() {
  const summary = buildFullSummary();
  const box = document.getElementById("summaryBox");
  if (box) {
    box.innerHTML = summary.html;
    box.classList.remove("hidden");
  }

  // âœ… Ù…Ù‡Ù…: ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ù…Ø®ÙÙŠ Ù„ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
  const hidden = document.getElementById("full_summary");
  if (hidden) hidden.value = summary.text;
}
</script>




<script>
function prepareBeforeSubmit() {
  const reqId = generateRequestId();
  document.getElementById("request_id").value = reqId;

  // âœ… Ø­ÙØ¸ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
  document.getElementById("location_hidden").value =
    document.getElementById("location")?.value || "â€”";

  showSummary();
  document.getElementById("cc_email").value = v("email");

  setTimeout(() => {
    sendWhatsAppToClient(reqId);
  }, 350);

  stripAllNamesExceptSummary();
}

  
/* =========================
   Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨
========================= */
function showSummary() {
  const byId = id => document.getElementById(id)?.value || "â€”";
  const byName = name => document.querySelector(`[name="${name}"]`)?.value || "â€”";

  const type = byId("type");
  let serviceDetails = "";

  // â›”ï¸ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø·Ù„Ø¨ ØªÙˆØ±ÙŠØ¯ØŒ Ù„Ø§ ØªØ¯Ø®Ù„ Ù…Ù†Ø·Ù‚ Ø§Ù„ØµÙŠØ§Ù†Ø© Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§
  if (type === "supply") {
    serviceDetails = `
      <b>ğŸ—ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b> ${byId("project")}<br>
      <b>ğŸ¢ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${document.querySelector('#supply select')?.value || "â€”"}<br>
      <b>ğŸ›— Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${document.querySelectorAll('#supply input[type="number"]')[0]?.value || "â€”"}<br>
      <b>ğŸ¢ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±:</b> ${document.querySelectorAll('#supply input[type="number"]')[1]?.value || "â€”"}<br>
      <b>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${document.querySelector('#supply textarea')?.value || "â€”"}
    `;
  }

  // âœ… Ù…Ù†Ø·Ù‚ Ø§Ù„ØµÙŠØ§Ù†Ø© ÙÙ‚Ø· Ø¥Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ maintenance
  if (type === "maintenance") {
    const hasContract = byId("hasContract");

    if (hasContract === "yes") {
      serviceDetails = `
        <b>ğŸ¢ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b> ${byName("project_name")}<br>
        <b>ğŸ”§ Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ø§Øº:</b> ${byName("issue_type")}<br>
        <b>ğŸš¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_status")}<br>
        <b>âš¡ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨:</b> ${byName("priority")}<br>
        <b>ğŸ“ ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„:</b><br>${byName("description_contract")}
      `;
    }

    if (hasContract === "no") {
      serviceDetails = `
        <b>ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${byName("service_type")}<br>
        <b>ğŸ›— Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${byName("lifts_count")}<br>
        <b>ğŸ¢ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${byName("building_type")}<br>
        <b>ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª:</b> ${byName("stops_count")}<br>
        <b>âš–ï¸ Ø§Ù„Ø­Ù…ÙˆÙ„Ø©:</b> ${byName("capacity")} ÙƒØ¬Ù…<br>
        <b>ğŸ­ Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${byName("lift_brand")}<br>
        <b>ğŸš¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_condition")}<br>
        <b>â³ Ø¹Ù…Ø± Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_age")}<br>
        <b>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${byName("description_no_contract")}
      `;
    }
  }

  // âœ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ ÙÙŠ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚
  const box = document.getElementById("summaryBox");
  if (box) {
    box.innerHTML = serviceDetails || "â€”";
    box.classList.remove("hidden");
  }
} // âœ… Ø¥ØºÙ„Ø§Ù‚ showSummary Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­

/* =========================
   Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
========================= */
document.addEventListener("DOMContentLoaded", () => {
  hideAllSections();
  const cq = document.getElementById("contractQuestion");
  if (cq) cq.style.display = "none";
});
</script>

 
<script>
function prepareBeforeSubmit() {

  // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù„Ø®Øµ
  showSummary();

  // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
  const reqId = generateRequestId();
  document.getElementById("request_id").value = reqId;

  // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ name Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨
  stripAllNamesExceptSummary();

  // Ù†Ø³Ø®Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„
  document.getElementById("cc_email").value =
    document.getElementById("email").value || "";

  // ÙˆØ§ØªØ³Ø§Ø¨
setTimeout(() => {
  // Ø¥Ø°Ø§ initMap Ù„Ù… ØªØ´ØªØºÙ„ Ù„Ø£Ù† Ø§Ù„Ù‚Ø³Ù… ÙƒØ§Ù† Ù…Ø®ÙÙŠ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„
  if (!window.__rklMapInitialized) {
    initMap();
  } else if (window.google && window.google.maps && window.map) {
    google.maps.event.trigger(window.map, "resize");
  }
}, 250);

}



</script>



  <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCscTZats0zQdXyjweiRZuqjiSxw_Y1dlY&callback=initMap"
  async
  defer>
</script>

<script>
function normalizeSaudiPhone(phone) {
  phone = phone.replace(/\D/g, '');
  if (phone.startsWith('05')) return '966' + phone.substring(1);
  if (phone.startsWith('5')) return '966' + phone;
  if (phone.startsWith('966')) return phone;
  return '';
}

function sendWhatsAppToClient(forcedReqId) {
  const name = (document.getElementById("name").value || "â€”").trim();
  const rawPhone = document.getElementById("phone").value || "";
  const phone = normalizeSaudiPhone(rawPhone);

  if (!phone) {
    alert("âŒ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ØµØ­ÙŠØ­");
    return false;
  }

  const reqId = forcedReqId || document.getElementById("request_id").value || "â€”";
  const summary = buildFullSummary();

  const whatsappMsg =
`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name} ğŸ‘‹
ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ù„Ø¯Ù‰ *RKL Ù„Ù„Ù…ØµØ§Ø¹Ø¯* âœ…

ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${reqId}
ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${summary.typeLabel}

ğŸ“Œ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨:
${summary.text}

ğŸ“ ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±/Ø§Ù„Ù…Ø®Ø·Ø· Ù…Ø¹ Ø°ÙƒØ± Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰: 0114774021 Ø£Ùˆ admin@rkl.sa`;

  window.open("https://wa.me/" + phone + "?text=" + encodeURIComponent(whatsappMsg), "_blank");
  return true;
}

function generateRequestId() {
  const now = new Date();
  const y = now.getFullYear().toString().slice(2);
  const m = String(now.getMonth() + 1).padStart(2, '0');
  const d = String(now.getDate()).padStart(2, '0');
  const r = Math.floor(Math.random() * 900 + 100); // 3 digits
  return `RKL-${y}${m}${d}-${r}`;
}

function toggleVisits() {
  const service = document.getElementById("serviceType").value;
  const visitsSelect = document.getElementById("maintenanceVisits");
  const visitsLabel = document.getElementById("visitsLabel");

  if (service.includes("Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø©")) {
    visitsSelect.style.display = "block";
    visitsLabel.style.display = "block";
  } else {
    visitsSelect.style.display = "none";
    visitsLabel.style.display = "none";
    visitsSelect.value = "";
  }
}        
</script>
<script>
function stripAllNamesExceptSummary() {
  const allowed = [
    'Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨',
    'Ù…Ù„Ø®Øµ_Ø§Ù„Ø·Ù„Ø¨_Ø§Ù„ÙƒØ§Ù…Ù„',
    'email',
    '_subject',
    '_template',
    '_captcha',
    '_language',
    '_cc',
    'request_type'
  ];

  document
    .querySelectorAll('input[name], select[name], textarea[name]')
    .forEach(el => {
      if (!allowed.includes(el.name)) {
        el.removeAttribute('name');
      }
    });
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  hideAllSections();
  document.getElementById("contractQuestion").style.display = "none";
});
</script>

<script>
function stripAllNamesExceptSummary() {
  const allowed = [
    'Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨',
    'Ù…Ù„Ø®Øµ_Ø§Ù„Ø·Ù„Ø¨_Ø§Ù„ÙƒØ§Ù…Ù„',
    'email',
    '_subject',
    '_template',
    '_captcha',
    '_language',
    '_cc',
    'request_type',
    'attachments',      // âœ… Ù„Ù„ØµÙˆØ±
    'Ù…ÙˆÙ‚Ø¹_Ø§Ù„Ù…Ø´Ø±ÙˆØ¹'      // âœ… Ù„Ù„Ù…ÙˆÙ‚Ø¹
  ];

  document.querySelectorAll('input[name], select[name], textarea[name]').forEach(el => {
    if (!allowed.includes(el.name)) el.removeAttribute('name');
  });
}

function prepareBeforeSubmit() {
  const reqId = generateRequestId();
  document.getElementById("request_id").value = reqId;

  // âœ… Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
  document.getElementById("location_hidden").value =
    document.getElementById("location")?.value || "â€”";

  // âœ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØªØ®Ø²ÙŠÙ†Ù‡ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
  showSummary();

  // âœ… Ù†Ø³Ø®Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„
  document.getElementById("cc_email").value = document.getElementById("email")?.value || "";

  // âœ… ÙˆØ§ØªØ³Ø§Ø¨
  setTimeout(() => { sendWhatsAppToClient(reqId); }, 350);

  // âœ… Ù„Ø§ ØªØ­Ø°Ù Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ØªØ¬Ù‡ÙŠØ² ÙƒÙ„ Ø´ÙŠØ¡
  stripAllNamesExceptSummary();
}
</script>


</body>
</html>
