<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ุทูุจ ุฎุฏูุฉ - RKL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Cairo;background:#f4f6f9}
.container{max-width:900px;margin:30px auto;background:#fff;padding:30px;border-radius:12px}
h2{text-align:center;margin-bottom:10px}
label{font-weight:600;margin-top:12px;display:block}
input,select,textarea{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #ccc}
button{margin-top:25px;width:100%;background:#0a7cff;color:#fff;border:none;padding:15px;font-size:16px;border-radius:8px}
.hidden{display:none}
.section{margin-top:25px;border-top:1px solid #eee;padding-top:15px}
.summary{background:#f9fafb;padding:15px;border-radius:8px;margin-top:20px}
</style>
</head>

<body>

<div class="container">
<h2>๐ ูููุฐุฌ ุทูุจ ุฎุฏูุฉ</h2>

<!-- ุจูุงูุงุช ุงูุนููู -->
<div class="section">
<label>ุงุณู ุงูุนููู</label>
<input id="name">

<label>ุฑูู ุงูุฌูุงู</label>
<input id="phone">


<select id="type" onchange="toggleType()">
  <option value="">ุงุฎุชุฑ ููุน ุงูุทูุจ</option>
  <option value="maintenance">ุตูุงูุฉ ูุตุงุนุฏ</option>
  <option value="supply">ุชูุฑูุฏ ูุชุฑููุจ ูุตุงุนุฏ</option>
  <option value="consult">ุงุณุชุดุงุฑุฉ ููุท</option>
</select>


<!-- ููุน ุงูุทูุจ (ุซุงุจุช ุงูุขู) -->
<input type="hidden" name="request_type" value="maintenance">

<label>ูู ูุฏูู ุนูุฏ ุตูุงูุฉ ูุนูุงุ</label>
<select id="hasContract" onchange="toggleContractFlow()">
  <option value="">ุงุฎุชุฑ</option>
  <option value="yes">ูุนู</option>
  <option value="no">ูุง</option>
</select>


<div id="withContract" style="display:none">

  <label>ุงุณู ุงููุดุฑูุน / ุงููููุน</label>
  <input type="text" name="project_name">

  <label>  ููุน ุงูุจููุงุบ ุงููุทููุจ</label>
  <select name="issue_type">
    <option>ุตูุงูุฉ ุฏูุฑูุฉ</option>
    <option>ุนุทู ููุงุฌุฆ</option>
    <option>ุงุญุชุฌุงุฒ</option>
    <option>ุฅุนุงุฏุฉ ุชุดุบูู</option>
  </select>

  <label>ุญุงูุฉ ุงููุตุนุฏ</label>
  <select name="lift_status">
    
    <option>ูุนูู ูุน ููุงุญุธุงุช</option>
    <option>ูุชููู</option>
  </select>

  <label>ุฃููููุฉ ุงูุทูุจ</label>
  <select name="priority">
    <option>ุนุงุฏู</option>
    <option>ุนุงุฌู</option>
    <option>ุทุงุฑุฆ</option>
  </select>

  <label>ูุตู ุงูุนุทู</label>
  <textarea name="description"></textarea>
<label>ุฑูุน ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
<small style="color:#666;">
ูุฑุฌู ุฑูุน ุตูุฑุฉ ูููุงุจููุฉ ูู ุงูุฏุงุฎู ุฃู ููุญุฉ ุงูููุชุฑูู ุฏุงุฎู ุบุฑูุฉ ุงูููููุฉ (ุฅู ูุฌุฏุช)ุ  
ูุฐูู ููุณุงุนุฏุชูุง ุนูู ุชูููู  ุจุดูู ุฃุฏู.
</small>
<input type="file" accept="image/*">
</div>


<div id="withoutContract" style="display:none">

  <label>ููุน ุงูุฎุฏูุฉ ุงููุทููุจุฉ</label>
  <select name="service_type">
    
    <option>ุนุฑุถ ุณุนุฑ ุฒูุงุฑุฉ ููุฑู ูุงุญุฏุฉ</option>
    <option>ุนุฑุถ ุณุนุฑ ุนูุฏ ุตูุงูุฉ ููุงุฆูุฉ ุณููู</option>
  </select>

  <label>ุนุฏุฏ ุงููุตุงุนุฏ</label>
  <input type="number" name="lifts_count">

  <label>ููุน ุงููุตุงุนุฏ</label>
  <select name="lift_status">
    <option>ููุฌู</option>
    <option>ุดูุฏูุฒ</option>
    <option>ุจู ุงูุชูุณ</option>
    <option>ุชุฌููุน </option>
    <option>ูุง ุงุนุฑู </option>
  </select>
  <label>ุญุงูุฉ ุงููุตุนุฏ</label>
  <select name="lift_status">
    <option>ูุนูู</option>
    <option>ูุชููู</option>
    <option>ุจู ูุดุงูู</option>
  </select>

  <label>ุงูุนูุฑ ุงูุชูุฑูุจู ูููุตุนุฏ</label>
  <select name="lift_age">
    <option>ุฃูู ูู 5 ุณููุงุช</option>
    <option>5 โ 10 ุณููุงุช</option>
    <option>ุฃูุซุฑ ูู 10 ุณููุงุช</option>
  </select>
<label>ุฑูุน ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
<small style="color:#666;">
ูุฑุฌู ุฑูุน ุตูุฑุฉ ูููุงุจููุฉ ูู ุงูุฏุงุฎู ุฃู ููุญุฉ ุงูููุชุฑูู ุฏุงุฎู ุบุฑูุฉ ุงูููููุฉ (ุฅู ูุฌุฏุช)ุ  
ูุฐูู ููุณุงุนุฏุชูุง ุนูู ุชูููู  ุจุดูู ุฃุฏู.
</small>
<input type="file" accept="image/*">
  <label>ููุงุญุธุงุช ุนู ุงููุตุงุนุฏ </label>
  <textarea name="description"></textarea>

</div>



<div id="mapSection">
  <label>ูููุน ุงููุตุนุฏ</label>
  <input type="text" id="location" readonly>
  <div id="map" style="height:300px;border-radius:8px;margin-top:10px;"></div>
</div>








<!-- ุชูุฑูุฏ -->
<div id="supply" class="section hidden">
<label>ุงุณู ุงููุดุฑูุน</label>
<input id="project">

<label>ูููุน ุงููุดุฑูุน</label>
<input id="project_location">

<label>ููุน ุงููุจูู</label>
<select>
  <option>ุณููู</option>
  <option>ุชุฌุงุฑู</option>
  <option>ูุณุชุดูู</option>
</select>

<label>ุนุฏุฏ ุงููุตุงุนุฏ</label>
<input type="number">

<label>ุนุฏุฏ ุงูุฃุฏูุงุฑ</label>
<input type="number">

<label>ุฑูุน ุงููุฎุทุท</label>
<input type="file">

<label>ููุงุญุธุงุช</label>
<textarea></textarea>
</div>

<!-- ููุฎุต -->
<div class="section">
<button type="button" onclick="showSummary()">
๐ ุนุฑุถ ููุฎุต ุงูุทูุจ
</button>

<div id="summaryBox" class="summary hidden"></div>
</div>

<form action="https://formsubmit.co/admin@rkl.sa"
      method="POST"
      onsubmit="window.open('https://wa.me/966114774021','_blank')">

  <input type="hidden" name="_subject" value="๐ฉ ุทูุจ ุฎุฏูุฉ ุฌุฏูุฏ ูู ูููุน RKL">
<input type="hidden" name="_captcha" value="false">
<input type="hidden" name="_template" value="table">

<button type="submit">๐จ ุฅุฑุณุงู ุงูุทูุจ</button>
</form>


<p style="font-size:13px;color:#777;margin-top:10px;text-align:center;">
๐ ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ุจุณุฑูุฉ ุชุงูุฉ ููู ูุชู ุงุณุชุฎุฏุงููุง ุฅูุง ูุบุฑุถ ุงูุฎุฏูุฉ.
</p>

</div>

<script>
let map, marker;

/* =========================
   ุงูุชุญูู ุจููุน ุงูุทูุจ
========================= */
function toggleType() {
  const type = document.getElementById("type").value;

  hideAllSections();

  if (type === "maintenance") {
    document.getElementById("mapSection").style.display = "block";
  }

  if (type === "supply") {
    document.getElementById("supply").style.display = "block";
    document.getElementById("mapSection").style.display = "block";
  }

  if (type === "consult") {
    alert("๐ ุณูุชู ุงูุชูุงุตู ูุนู ูุชูุฏูู ุงุณุชุดุงุฑุฉ ูููุฉ ูุฌุงููุฉ");
  }
}

/* =========================
   ูู ููุฌุฏ ุนูุฏุ
========================= */
function toggleContractFlow() {
  const val = document.getElementById("hasContract").value;

  document.getElementById("withContract").style.display = "none";
  document.getElementById("withoutContract").style.display = "none";

  if (val === "yes") {
    document.getElementById("withContract").style.display = "block";
  }

  if (val === "no") {
    document.getElementById("withoutContract").style.display = "block";
  }
}

/* =========================
   ุฅุฎูุงุก ูู ุงูุฃูุณุงู
========================= */
function hideAllSections() {
  document.getElementById("withContract").style.display = "none";
  document.getElementById("withoutContract").style.display = "none";
  document.getElementById("supply").style.display = "none";
 
}


/* =========================
   Google Map
========================= */
function initMap() {
  const defaultLocation = { lat: 24.7136, lng: 46.6753 };

  map = new google.maps.Map(document.getElementById("map"), {
    center: defaultLocation,
    zoom: 12
  });

  map.addListener("click", function (e) {
    if (marker) marker.setMap(null);

    marker = new google.maps.Marker({
      position: e.latLng,
      map: map
    });

    document.getElementById("location").value =
      `https://maps.google.com/?q=${e.latLng.lat()},${e.latLng.lng()}`;
  });
}

function showSummary() {

  const byId = id => {
    const el = document.getElementById(id);
    return el && el.value ? el.value : "โ";
  };

  const byName = name => {
    const el = document.querySelector(`[name="${name}"]`);
    return el && el.value ? el.value : "โ";
  };

  const hasContract = byId("hasContract");

  let serviceDetails = "";

  if (hasContract === "yes") {
    serviceDetails = `
      <b>๐ข ุงุณู ุงููุดุฑูุน:</b> ${byName("project_name")}<br>
      <b>๐ง ููุน ุงูุจูุงุบ:</b> ${byName("issue_type")}<br>
      <b>๐จ ุญุงูุฉ ุงููุตุนุฏ:</b> ${byName("lift_status")}<br>
      <b>โก ุฃููููุฉ ุงูุทูุจ:</b> ${byName("priority")}<br>
      <b>๐ ูุตู ุงูุนุทู:</b><br>
      ${byName("description")}
    `;
  }

  if (hasContract === "no") {
    serviceDetails = `
      <b>๐๏ธ ููุน ุงูุฎุฏูุฉ:</b> ${byName("service_type")}<br>
      <b>๐ ุนุฏุฏ ุงููุตุงุนุฏ:</b> ${byName("lifts_count")}<br>
      <b>๐ญ ููุน ุงููุตุงุนุฏ:</b> ${byName("lift_status")}<br>
      <b>โณ ุนูุฑ ุงููุตุนุฏ:</b> ${byName("lift_age")}<br>
      <b>๐ ููุงุญุธุงุช:</b><br>
      ${byName("description")}
    `;
  }

  const summary = `
  <div style="line-height:2">

    <h4>๐ ููุฎุต ุงูุทูุจ</h4>
    <hr>

    <b>๐ค ุงูุงุณู:</b> ${byId("name")}<br>
    <b>๐ ุงูุฌูุงู:</b> ${byId("phone")}<br>
    <b>๐๏ธ ููุน ุงูุทูุจ:</b> ${byId("type")}<br>
    <b>๐ ุนูุฏ ุตูุงูุฉ:</b> ${hasContract}<br>

    <hr>

    ${serviceDetails}

    <hr>

    <b>๐ ูููุน ุงููุตุนุฏ:</b><br>
    <a href="${byId("location")}" target="_blank">
      ${byId("location")}
    </a>

    <hr>

    <b>๐ ุตูุฑุฉ ูุฑููุฉ:</b>
    ${document.querySelector('input[type="file"]')?.files.length ? "ุชู ุฑูุน ุตูุฑุฉ โ" : "ูุง ุชูุฌุฏ ุตูุฑุฉ"}

  </div>
  `;

  document.getElementById("summaryBox").innerHTML = summary;
  document.getElementById("summaryBox").classList.remove("hidden");
}


</script>
  <script>
function submitForm() {

  const params = {
    name: document.getElementById("name").value || "โ",
    phone: document.getElementById("phone").value || "โ",
    type: document.getElementById("type").value || "โ",
    hasContract: document.getElementById("hasContract").value || "โ",
    projectName: document.querySelector('[name="project_name"]')?.value || "โ",
    elevatorStatus: document.querySelector('[name="lift_status"]')?.value || "โ",
    priority: document.querySelector('[name="priority"]')?.value || "โ",
    description: document.querySelector('[name="description"]')?.value || "โ",
    location: document.getElementById("location").value || "โ",
    imageStatus: document.querySelector('input[type="file"]')?.files.length
      ? "ุชู ุฅุฑูุงู ุตูุฑุฉ"
      : "ูุง ุชูุฌุฏ ุตูุฑุฉ"
  };

  fetch("send-request.php", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(params)
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === "success") {
      alert("โ ุชู ุฅุฑุณุงู ุงูุทูุจ ุจูุฌุงุญุ ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจูุง");
    } else {
      alert("โ ูู ูุชู ุฅุฑุณุงู ุงูุทูุจ");
    }
  })
  .catch(err => {
    console.error(err);
    alert("โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ");
  });
}
</script>



  <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCscTZats0zQdXyjweiRZuqjiSxw_Y1dlY&callback=initMap"
  async
  defer>
</script>

</body>
</html>
