<form><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© - RKL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Cairo;background:#f4f6f9}
.container{max-width:900px;margin:30px auto;background:#fff;padding:30px;border-radius:12px}
h2{text-align:center;margin-bottom:10px}
label{font-weight:600;margin-top:12px;display:block}
input,select,textarea{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #ccc}
button{margin-top:25px;width:100%;background:#0a7cff;color:#fff;border:none;padding:15px;font-size:16px;border-radius:8px}
.hidden{display:none}
.section{margin-top:25px;border-top:1px solid #eee;padding-top:15px}
.summary{background:#f9fafb;padding:15px;border-radius:8px;margin-top:20px}
</style>
</head>

<body>
<form action="https://formsubmit.co/admin@rkl.sa"
      method="POST"
      enctype="multipart/form-data"
      onsubmit="prepareBeforeSubmit();">
<div class="container">
<h2>ğŸ“‹ Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©</h2>
<input type="hidden" name="_template" value="box">


<!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
<div class="section">
<label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
<input id="name">


<label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
<input id="phone" placeholder="05XXXXXXXX" required>
  <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
<input id="email" placeholder="example@email.com" required>




<select id="type" onchange="toggleType()">
  <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</option>
  <option value="maintenance">ØµÙŠØ§Ù†Ø© Ù…ØµØ§Ø¹Ø¯</option>
  <option value="supply">ØªÙˆØ±ÙŠØ¯ ÙˆØªØ±ÙƒÙŠØ¨ Ù…ØµØ§Ø¹Ø¯</option>
  <option value="consult">Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ‚Ø·</option>
</select>


<!-- Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ (Ø«Ø§Ø¨Øª Ø§Ù„Ø¢Ù†) -->
<input type="hidden" name="request_type" id="request_type">


<div id="contractQuestion">
  <label>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø¯ Ù…Ø¹Ù†Ø§ØŸ</label>
  <select id="hasContract" onchange="toggleContractFlow()">
    <option value="">Ø§Ø®ØªØ±</option>
    <option value="yes">Ù†Ø¹Ù…</option>
    <option value="no">Ù„Ø§</option>
  </select>
</div>



<div id="withContract" style="display:none">

  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ / Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
  <input type="text" name="project_name">

  <label>  Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ù„Ø§Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
  <select name="issue_type">
    <option>ØµÙŠØ§Ù†Ø© Ø¯ÙˆØ±ÙŠØ©</option>
    <option>Ø¹Ø·Ù„ Ù…ÙØ§Ø¬Ø¦</option>
    <option>Ø§Ø­ØªØ¬Ø§Ø²</option>
    <option>Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„</option>
  </select>

  <label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯</label>
  <select name="lift_status">
    
    <option>ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ù…Ù„Ø§Ø­Ø¸Ø§Øª</option>
    <option>Ù…ØªÙˆÙ‚Ù</option>
  </select>

  <label>Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨</label>
  <select name="priority">
    <option>Ø¹Ø§Ø¯ÙŠ</option>
    <option>Ø¹Ø§Ø¬Ù„</option>
    <option>Ø·Ø§Ø±Ø¦</option>
  </select>

  <label>ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„</label>
  <textarea name="description_contract"></textarea>


  <label>Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ± / Ù…Ø®Ø·Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
<small style="color:#666;">
â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø£ÙƒØ«Ø± Ù…Ù† ØµÙˆØ±Ø©  
â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØµÙˆÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„  
â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ù…Ù„Ù PDF (Ù…Ø®Ø·Ø·)
</small>




</div>


<div id="withoutContract" style="display:none">

  <label>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
  <select name="service_type" id="serviceType" onchange="toggleVisits()">

    
    <option>Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø²ÙŠØ§Ø±Ø© Ù„Ù…Ø±Ù‡ ÙˆØ§Ø­Ø¯Ø©</option>
    <option>Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø© ÙˆÙ‚Ø§Ø¦ÙŠØ© Ø³Ù†ÙˆÙŠ</option>
  </select>
      <label id="visitsLabel" style="display:none">Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</label>
<select name="maintenance_visits" id="maintenanceVisits" style="display:none">
  <option value="">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</option>
  <option value="12">12 Ø²ÙŠØ§Ø±Ø© Ø³Ù†ÙˆÙŠØ©</option>
  <option value="6">6 Ø²ÙŠØ§Ø±Ø§Øª Ø³Ù†ÙˆÙŠØ©</option>
</select>


  <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
  <input type="number" name="lifts_count">
  <label>Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª (Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)</label>
<input type="number" name="stops_count" placeholder="Ù…Ø«Ø§Ù„: 10">

<label>Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ¹Ø¯ (ÙƒØ¬Ù…)</label>
<select name="capacity">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ù…ÙˆÙ„Ø©</option>
  <option>450</option>
  <option>630</option>
  <option>800</option>
  <option>1000</option>
  <option>1600</option>
</select>

<label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰</label>
<select name="building_type">
  <option value="">Ø§Ø®ØªØ±</option>
  <option>Ø³ÙƒÙ†ÙŠ</option>
  <option>Ø­ÙƒÙˆÙ…ÙŠ</option>
</select>


<label>Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
<select name="lift_brand">
  <option>ÙÙˆØ¬ÙŠ</option>
  <option>Ø´Ù†Ø¯Ù„Ø±</option>
  <option>Ø§ÙˆØªÙŠØ³</option>
  <option>ØªØ¬Ù…ÙŠØ¹ Ù…Ø­Ù„ÙŠ</option>
  <option>Ù„Ø§ Ø§Ø¹Ø±Ù</option>
</select>

<label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯</label>
<select name="lift_condition">
  <option>ÙŠØ¹Ù…Ù„</option>
  <option>Ù…ØªÙˆÙ‚Ù</option>
  <option>Ø¨Ù‡ Ù…Ø´Ø§ÙƒÙ„</option>
</select>


  <label>Ø§Ù„Ø¹Ù…Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…ØµØ¹Ø¯</label>
  <select name="lift_age">
    <option>Ø£Ù‚Ù„ Ù…Ù† 5 Ø³Ù†ÙˆØ§Øª</option>
    <option>5 â€“ 10 Ø³Ù†ÙˆØ§Øª</option>
    <option>Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª</option>
  </select>
<label>Ø±ÙØ¹ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
<small style="color:#666;">
ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„ÙƒØ§Ø¨ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ Ø£Ùˆ Ù„ÙˆØ­Ø© Ø§Ù„ÙƒÙ†ØªØ±ÙˆÙ„ Ø¯Ø§Ø®Ù„ ØºØ±ÙØ© Ø§Ù„Ù…ÙƒÙŠÙ†Ø© (Ø¥Ù† ÙˆØ¬Ø¯Øª)ØŒ  
ÙˆØ°Ù„Ùƒ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙ†Ø§ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…  Ø¨Ø´ÙƒÙ„ Ø£Ø¯Ù‚.
</small>


  <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù† Ø§Ù„Ù…ØµØ§Ø¹Ø¯ </label>
  <textarea name="description_no_contract"></textarea>

</div>



<div id="mapSection">
  <label>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
  <input type="text" id="location" readonly>
  <div id="map" style="height:300px;border-radius:8px;margin-top:10px;"></div>
</div>








<!-- ØªÙˆØ±ÙŠØ¯ -->
<div id="supply" class="section hidden">
<label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
<input id="project" name="project_name">


<label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰</label>
<select name="building_type_supply">
  <option>Ø³ÙƒÙ†ÙŠ</option>
  <option>ØªØ¬Ø§Ø±ÙŠ</option>
  <option>Ù…Ø³ØªØ´ÙÙ‰</option>
</select>

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯</label>
<input type="number" name="lifts_count_supply">

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±</label>
<input type="number" name="floors_count_supply">

<b>ğŸ“ Ù…Ø®Ø·Ø· Ù…Ø±ÙÙ‚:</b> Ù†Ø¹Ù… (ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨)



<label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
<textarea name="supply_notes"></textarea>

</div>

<!-- Ù…Ù„Ø®Øµ -->
<div class="section">
<button type="button" onclick="showSummary()">
ğŸ“‹ Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨
</button>

<div id="summaryBox" class="summary hidden"></div>
</div>

<button type="submit">
ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
</button>


<input type="hidden" name="Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨" id="request_id">


  <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª FormSubmit -->
<input type="hidden" name="_subject"
value="ğŸ“© Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯ â€“ RKL | {{Ø±Ù‚Ù…_Ø§Ù„Ø·Ù„Ø¨}}">


  <input type="hidden" name="_captcha" value="false">


  <!-- Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ -->


  <!-- Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (ÙŠØ¸Ù‡Ø± ÙƒÙ†Øµ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ø¯ÙˆÙ„) -->
  <input type="hidden" name="Ù…Ù„Ø®Øµ_Ø§Ù„Ø·Ù„Ø¨_Ø§Ù„ÙƒØ§Ù…Ù„" id="full_summary">

  <!-- Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù„Ù„Ø¹Ù…ÙŠÙ„ -->
  <input type="hidden" name="_cc" id="cc_email">


</form>




<p style="font-size:13px;color:#777;margin-top:10px;text-align:center;">
ğŸ”’ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø³Ø±ÙŠØ© ØªØ§Ù…Ø© ÙˆÙ„Ù† ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ø¥Ù„Ø§ Ù„ØºØ±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø©.
</p>

</div>

<script>
let map, marker;

/* =========================
   Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨
========================= */
function toggleType() {
  const type = document.getElementById("type").value;
document.getElementById("request_type").value = type;

  // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹
  hideAllSections();

  // Ø¥Ø®ÙØ§Ø¡ Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ù‚Ø¯ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
  document.getElementById("contractQuestion").style.display = "none";
  document.getElementById("hasContract").value = "";

  if (type === "maintenance") {
    // ØµÙŠØ§Ù†Ø© â†’ ÙŠØ¸Ù‡Ø± Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ù‚Ø¯ + Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    document.getElementById("contractQuestion").style.display = "block";
    document.getElementById("mapSection").style.display = "block";
  }

  if (type === "supply") {
    // ØªÙˆØ±ÙŠØ¯ ÙˆØªØ±ÙƒÙŠØ¨ â†’ ÙÙ‚Ø· Ù‚Ø³Ù… Ø§Ù„ØªÙˆØ±ÙŠØ¯ + Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    document.getElementById("supply").style.display = "block";
    document.getElementById("mapSection").style.display = "block";
  }

  if (type === "consult") {
    alert("ğŸ“ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ†ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©");
  }
}


/* =========================
   Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø¹Ù‚Ø¯ØŸ
========================= */
function toggleContractFlow() {
  const val = document.getElementById("hasContract").value;

  document.getElementById("withContract").style.display = "none";
  document.getElementById("withoutContract").style.display = "none";

  if (val === "yes") {
    document.getElementById("withContract").style.display = "block";
  }

  if (val === "no") {
    document.getElementById("withoutContract").style.display = "block";
  }
}

/* =========================
   Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
========================= */
function hideAllSections() {
  document.getElementById("withContract").style.display = "none";
  document.getElementById("withoutContract").style.display = "none";
  document.getElementById("supply").style.display = "none";
 
}


/* =========================
   Google Map
========================= */
function initMap() {
  const defaultLocation = { lat: 24.7136, lng: 46.6753 };

  map = new google.maps.Map(document.getElementById("map"), {
    center: defaultLocation,
    zoom: 12
  });

  map.addListener("click", function (e) {
    if (marker) marker.setMap(null);

    marker = new google.maps.Marker({
      position: e.latLng,
      map: map
    });

    document.getElementById("location").value =
      `https://maps.google.com/?q=${e.latLng.lat()},${e.latLng.lng()}`;
  });
}

function showSummary() {

  const byId = id => document.getElementById(id)?.value || "â€”";
  const byName = name => document.querySelector(`[name="${name}"]`)?.value || "â€”";

  const type = byId("type");
  const hasContract = byId("hasContract");

  let serviceDetails = "";

  /* =========================
     ØµÙŠØ§Ù†Ø© Ù…ØµØ§Ø¹Ø¯
  ========================= */
  if (type === "maintenance") {

    if (hasContract === "yes") {
      serviceDetails = `
      <b>ğŸ¢ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b> ${byName("project_name")}<br>
      <b>ğŸ”§ Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ø§Øº:</b> ${byName("issue_type")}<br>
      <b>ğŸš¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_status")}<br>
      <b>âš¡ Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨:</b> ${byName("priority")}<br>
      <b>ğŸ“ ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„:</b><br>${byName("description_contract")}
      `;
    }

    if (hasContract === "no") {
      serviceDetails = `
      <b>ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${byName("service_type")}<br>
      <b>ğŸ” Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©:</b> ${byName("maintenance_visits")} Ø²ÙŠØ§Ø±Ø©<br>
      <b>ğŸ›— Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${byName("lifts_count")}<br>
      <b>ğŸ¢ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${byName("building_type")}<br>
      <b>ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª:</b> ${byName("stops_count")}<br>
      <b>âš–ï¸ Ø§Ù„Ø­Ù…ÙˆÙ„Ø©:</b> ${byName("capacity")} ÙƒØ¬Ù…<br>
      <b>ğŸ­ Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${byName("lift_brand")}<br>
      <b>ğŸš¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_condition")}<br>
      <b>â³ Ø¹Ù…Ø± Ø§Ù„Ù…ØµØ¹Ø¯:</b> ${byName("lift_age")}<br>
      <b>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${byName("description_no_contract")}
      `;
    }
  }

  /* =========================
     ØªÙˆØ±ÙŠØ¯ ÙˆØªØ±ÙƒÙŠØ¨ Ù…ØµØ§Ø¹Ø¯
  ========================= */
  if (type === "supply") {
    serviceDetails = `
    <b>ğŸ—ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b> ${byId("project")}<br>
    <b>ğŸ¢ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰:</b> ${document.querySelector('#supply select')?.value || "â€”"}<br>
    <b>ğŸ›— Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯:</b> ${document.querySelector('#supply input[type="number"]')?.value || "â€”"}<br>
    <b>ğŸ¢ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±:</b> ${document.querySelectorAll('#supply input[type="number"]')[1]?.value || "â€”"}<br>
   
    <b>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</b><br>${document.querySelector('#supply textarea')?.value || "â€”"}
    `;
  }

  const summary = `
  <div style="line-height:2">
    <h4>ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h4>
    <hr>
    <b>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</b> ${byId("name")}<br>
    <b>ğŸ“ Ø§Ù„Ø¬ÙˆØ§Ù„:</b> ${byId("phone")}<br>
    <b>ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:</b> ${type}<br>

    <hr>
    ${serviceDetails}
    <hr>

    <b>ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</b><br>
    <a href="${byId("location")}" target="_blank">${byId("location")}</a>
  </div>
  `;

document.getElementById("summaryBox").innerHTML = summary;
document.getElementById("summaryBox").classList.remove("hidden");

// â¬‡ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ù‡Ù…)
document.getElementById("full_summary").value =
`ğŸ“‹ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯ â€“ RKL
Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${document.getElementById("request_id").value}
--------------------------------

ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${byId("name")}
ğŸ“ Ø§Ù„Ø¬ÙˆØ§Ù„: ${byId("phone")}
ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${type}

${serviceDetails
  .replace(/<br>/g, "\n")
  .replace(/<[^>]*>/g, "")
}

ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:
${byId("location")}
`;

}


</script>
 
<script>
function prepareBeforeSubmit() {
  // 1) ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ø®Øµ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ù† Ù†ÙØ³ Ù…Ù„Ø®Øµ Ø§Ù„ØµÙØ­Ø©
  showSummary();
const reqId = generateRequestId();
document.getElementById("request_id").value = reqId;

  // 2) Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„
  document.getElementById("cc_email").value =
    document.getElementById("email").value || "";

  // 3) ÙˆØ§ØªØ³Ø§Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ full_summary
setTimeout(() => {
  if (typeof sendWhatsAppToClient === "function") {
    sendWhatsAppToClient();
  }
}, 1200);
}


</script>



  <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCscTZats0zQdXyjweiRZuqjiSxw_Y1dlY&callback=initMap"
  async
  defer>
</script>

<script>
function normalizeSaudiPhone(phone) {
  phone = phone.replace(/\D/g, '');
  if (phone.startsWith('05')) return '966' + phone.substring(1);
  if (phone.startsWith('5')) return '966' + phone;
  if (phone.startsWith('966')) return phone;
  return '';
}

function sendWhatsAppToClient() {

  /* ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ===== */
  const name = document.getElementById("name").value || "â€”";
  const rawPhone = document.getElementById("phone").value;
  const phone = normalizeSaudiPhone(rawPhone);

  if (!phone) {
    alert("âŒ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ØµØ­ÙŠØ­");
    return false;
  }

  const type = document.getElementById("type").value || "â€”";
  const hasContract = document.getElementById("hasContract").value || "â€”";
  const location = document.getElementById("location").value || "â€”";
const reqId = document.getElementById("request_id").value;

const whatsappMsg = `
Ù…Ø±Ø­Ø¨Ù‹Ø§ ${name} ğŸ‘‹
ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ù„Ø¯Ù‰ *RKL Ù„Ù„Ù…ØµØ§Ø¹Ø¯* âœ…

ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${reqId}
ğŸ› ï¸ Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${type}
ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${location}

ğŸ“ ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± / Ø§Ù„Ù…Ø®Ø·Ø· Ù…Ø¹ Ø°ÙƒØ± Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø£Ø¹Ù„Ø§Ù‡.
`;

  /* ===== ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© ===== */
  let details = "";

  if (hasContract === "yes") {
    details = `
Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${document.querySelector('[name="project_name"]')?.value || "â€”"}
Ù†ÙˆØ¹ Ø§Ù„Ø¨Ù„Ø§Øº: ${document.querySelector('[name="issue_type"]')?.value || "â€”"}
Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯: ${document.querySelector('[name="lift_status"]')?.value || "â€”"}
Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø¨: ${document.querySelector('[name="priority"]')?.value || "â€”"}
ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„: ${document.querySelector('[name="description"]')?.value || "â€”"}
`;
  }

  if (hasContract === "no") {
  details = `
Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©: ${document.querySelector('[name="service_type"]')?.value || "â€”"}
Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØµØ§Ø¹Ø¯: ${document.querySelector('[name="lifts_count"]')?.value || "â€”"}
Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨Ù†Ù‰: ${document.querySelector('[name="building_type"]')?.value || "â€”"}
Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙ‚ÙØ§Øª: ${document.querySelector('[name="stops_count"]')?.value || "â€”"}
Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ¹Ø¯: ${document.querySelector('[name="capacity"]')?.value || "â€”"} ÙƒØ¬Ù…
Ù†ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø¹Ø¯: ${document.querySelector('[name="lift_brand"]')?.value || "â€”"}
Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ¹Ø¯: ${document.querySelector('[name="lift_condition"]')?.value || "â€”"}
Ø¹Ù…Ø± Ø§Ù„Ù…ØµØ¹Ø¯: ${document.querySelector('[name="lift_age"]')?.value || "â€”"}
Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${document.querySelector('[name="description"]')?.value || "â€”"}
`;
}



  window.open(
    "https://wa.me/" + phone + "?text=" + encodeURIComponent(whatsappMsg),
    "_blank"
  );
document.getElementById("cc_email").value =
  document.getElementById("email").value;

  return true; // Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§ Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙˆØ±Ù…
}

function generateRequestId() {
  const now = new Date();
  const y = now.getFullYear().toString().slice(2);
  const m = String(now.getMonth() + 1).padStart(2, '0');
  const d = String(now.getDate()).padStart(2, '0');
  const r = Math.floor(Math.random() * 900 + 100); // 3 digits
  return `RKL-${y}${m}${d}-${r}`;
}

function toggleVisits() {
  const service = document.getElementById("serviceType").value;
  const visitsSelect = document.getElementById("maintenanceVisits");
  const visitsLabel = document.getElementById("visitsLabel");

  if (service.includes("Ø¹Ù‚Ø¯ ØµÙŠØ§Ù†Ø©")) {
    visitsSelect.style.display = "block";
    visitsLabel.style.display = "block";
  } else {
    visitsSelect.style.display = "none";
    visitsLabel.style.display = "none";
    visitsSelect.value = "";
  }
}        
</script>



</body>
</html>
