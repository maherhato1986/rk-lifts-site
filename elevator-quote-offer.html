<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
   
<style>

/* =================================================
   إعدادات عامة + Editable
=================================================*/
body[contenteditable="true"] {
  cursor: text;
}
[contenteditable="true"]:focus {
  outline: none;
}
.editable-highlight:hover {
  background: rgba(59,130,246,0.06);
}
.pdf-cover {
  padding: 0 !important;
}

.fixed-pdf-img {
  width: 100%;
  height: auto;
  display: block;
}

@media print {
  .page {
    page-break-after: always;
    min-height: auto;
  }
}

table {
  break-inside: avoid;
}

/* =================================================
   تنسيق العرض على الشاشة
=================================================*/
body {
  font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #f3f4f6;
  margin: 0;
  padding: 20px;
  color: #111827;
}

.page {
  max-width: 900px;
  margin: 0 auto 30px auto;
  background: #ffffff;
  box-shadow: 0 0 8px rgba(15,23,42,0.08);
  padding: 25px 35px;
  position: relative;
   justify-content: center;   /* توسيط عمودي */
  align-items: center;       /* توسيط رأسي */
}


/* =================================================
   Header موحد للصفحات الداخلية
=================================================*/
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  border-bottom: 2px solid #e5e7eb;
  padding-bottom: 8px;
  margin-bottom: 12px;
  font-size: 12px;
}

.header-left {
  text-align: right;
}

.header-right {
  text-align: left;
}


.logo-box {
  text-align: right;
  font-size: 12px;
}

.logo-title {
  font-weight: 700;
  font-size: 18px;
}

.logo-sub {
  font-size: 11px;
  color: #6b7280;
  line-height: 1.5;
}

.offer-meta {
  text-align: left;
  font-size: 11px;
  line-height: 1.6;
}

/* =================================================
   العناوين والجداول
=================================================*/
h1.main-title {
  text-align: center;
  font-size: 18px;
  margin: 8px 0 15px;
}

.section-title {
  font-weight: 700;
  font-size: 14px;
  margin: 18px 0 8px;
  border-right: 4px solid #2563eb;
  padding-right: 6px;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}
   .partners-logos {
  display: flex;
  gap: 40px;
  justify-content: center;
  margin: 25px 0 40px;
}

.partner-box {
  text-align: center;
  max-width: 220px;
}

.partner-box img {
  max-height: 70px;
  margin-bottom: 10px;
}

.partner-name {
  font-weight: 600;
  font-size: 14px;
}

.partner-desc {
  font-size: 12px;
  color: #555;
}


th, td {
  border: 1px solid #d1d5db;
  padding: 6px 8px;
  vertical-align: top;
}

th {
  background: #f9fafb;
  font-weight: 600;
}

/* =================================================
   جداول المواصفات
=================================================*/
.spec-table th:nth-child(1),
.spec-table td:nth-child(1) {
  width: 6%;
  text-align: center;
}
.spec-table th:nth-child(2),
.spec-table td:nth-child(2) {
  width: 44%;
}
.spec-table th:nth-child(3),
.spec-table td:nth-child(3) {
  width: 18%;
  text-align: center;
}
.spec-table th:nth-child(4),
.spec-table td:nth-child(4) {
  width: 32%;
}

/* =================================================
   تقسيمات وملاحظات
=================================================*/
.two-col {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.small-note {
  font-size: 11px;
  color: #6b7280;
}

.terms p {
  font-size: 11.5px;
  margin: 4px 0;
  text-align: justify;
}

.signature-row {
  margin-top: 25px;
  display: flex;
  justify-content: space-between;
  font-size: 12px;
}

/* =================================================
   الرسومات والمخططات
=================================================*/
.diagram-container {
  margin-top: 15px;
  display: flex;
  justify-content: center;
}

/* Shaft + Cabin */
.shaft {
  position: relative;
  border: 2px solid #4b5563;
  width: 260px;
  height: 340px;
  background: #f9fafb;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cabin {
  border: 2px solid #10b981;
  background: #ecfdf5;
  width: 65%;
  height: 55%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  text-align: center;
}

/* مخطط متكامل */
.full-diagram {
  position: relative;
  width: 260px;
  height: 420px;
  border: 2px solid #374151;
  background: #f9fafb;
}

.oh-area,
.pit-area {
  width: 100%;
  text-align: center;
  font-size: 11px;
  color: #374151;
  position: absolute;
}

.oh-area { top: -26px; }
.pit-area { bottom: -26px; }

.full-diagram .cabin {
  position: absolute;
  top: 28%;
  left: 17%;
  width: 65%;
  height: 45%;
}

/* مخطط هندسي كامل */
.diagram-page {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
  margin-top: 30px;
  align-items: center;
}

.shaft-vertical {
  position: relative;
  width: 160px;
  height: 420px;
  border: 2px solid #475569;
  background: #f8fafc;
}

.car-vertical {
  position: absolute;
  top: 25%;
  left: 50%;
  transform: translateX(-50%);
  width: 70%;
  height: 45%;
  border: 2px solid #10b981;
  background: #ecfdf5;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

/* =================================================
   زر الطباعة والترقيم
=================================================*/
.btn-print {
  display: inline-block;
  margin: 10px auto 0;
  padding: 8px 18px;
  font-size: 13px;
  background: #2563eb;
  color: #ffffff;
  border-radius: 4px;
  border: none;
  cursor: pointer;
}

.page-index {
  position: absolute;
  left: 35px;
  bottom: 8px;
  font-size: 11px;
  color: #9ca3af;
}

/* =================================================
   الطباعة – A4 احترافية
=================================================*/
@media print {

  @page {
    size: A4;
    margin: 20mm 15mm 20mm 15mm;
  }

  body {
    margin: 0;
    padding: 0;
    background: #fff;
    font-family: "Cairo","Tajawal",Arial,sans-serif;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .page {
    page-break-after: always;
    break-after: page;
    min-height: auto;        /* ✅ إزالة السبب الرئيسي */
    box-shadow: none;
  }

  .btn-print {
    display: none !important;
  }

  table, tr, td, th,
  svg, .diagram-page {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Watermark للطباعة فقط */
  .page::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 380px;
    height: 380px;
    background: url("/public/images/logo.png") no-repeat center;

    background-size: contain;
    opacity: 0.04;
    transform: translate(-50%, -50%);
    z-index: 0;
  }

  .page > * {
    position: relative;
    z-index: 1;
  }
}
</style>


</head>
<body>

   <body contenteditable="true" spellcheck="false">

 


<!-- ================= صفحة غلاف 1 ================= -->
<div class="page pdf-cover">
  <img src="/public/images/FIRST_PAGE_RKL1.png" class="fixed-pdf-img">
</div>

<!-- ================= صفحة غلاف 2 ================= -->
<div class="page pdf-cover">
  <img src="/public/images/FIRST_PAGE_RKL2.png" class="fixed-pdf-img">
</div>




<!-- ================= صفحة 1: تعريف RKL + ملف العميل ================= -->
<div class="page">
    <div class="header">
        <div class="logo-box editable" contenteditable="true">
            <div class="logo-title">RKL للمصاعد والسلالم الكهربائية</div>
            <div class="logo-sub">
                السجل التجاري: 1010709355 – الرقم الضريبي: 302250422600003<br/>
                العنوان: السليمانية – الرياض – هاتف: 0114774021 – WWW.RKL.SA
            </div>
        </div>
        <div class="offer-meta">
            <div>رقم العرض: <span class="bind_quote_number">—</span></div>
            <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
        </div>
    </div>

    <h1 class="main-title">عرض سعر توريد وتركيب وتشغيل مصعد كهربائي</h1>

    <div class="section-title">أولاً: نبذة عن مؤسسة آر كي ال RKL</div>
    <p class="small-note editable" contenteditable="true">
        مؤسسة سعودية متخصصة في توريد وتركيب وصيانة المصاعد والسلالم الكهربائية، تعمل وفق أعلى معايير الجودة
        والسلامة، وتمتلك شراكات مع مصانع عالمية، مع خبرة في تنفيذ مشاريع حكومية وخاصة في مختلف مناطق المملكة.
    </p>

<div class="section-title">ثانياً: ملف العميل</div>
<table>
  <tbody>

    <!-- بيانات العميل والمشروع -->
    <tr>
      <th>اسم العميل</th>
      <td class="bind_customer_name">—</td>
      <th>اسم المشروع</th>
      <td class="bind_project_name">—</td>
    </tr>

    <tr>
      <th>اسم المخوّل بالتوقيع</th>
      <td class="bind_contact_person">—</td>
      <th>موقع المشروع</th>
      <td class="bind_project_location">—</td>
    </tr>

    <tr>
      <th>السجل التجاري</th>
      <td class="bind_cr_number">—</td>
      <th>الرقم الضريبي</th>
      <td class="bind_tax_number">—</td>
    </tr>

    <!-- بيانات الاستخدام العامة -->
    <tr>
      <th>نوع الاستخدام</th>
      <td>Passenger Elevator</td>
      <th>عدد المصاعد</th>
      <td class="bind_lifts">—</td>
    </tr>

    <!-- بيانات الحركة -->
    <tr>
      <th>الحمولة الاسمية (kg)</th>
      <td class="bind_capacity">—</td>
      <th>السرعة (m/s)</th>
      <td class="bind_speed">—</td>
    </tr>

    <tr>
      <th>عدد التوقفات (Stops)</th>
      <td class="bind_floors">—</td>
      <th>ارتفاع الدور الواحد (FH)</th>
      <td class="bind_floor_height">—</td>
    </tr>

    <tr>
      <th>ارتفاع الرحلة الكلي (TH)</th>
      <td class="bind_travel_height">—</td>
      <th>نظام التركيب</th>
      <td>MRL – Machine Room Less</td>
    </tr>

  </tbody>
</table>







    <div class="page-index">Page 1</div>
</div>

    <!-- ================= Page 2: RKL Coverage ================= -->
<div class="page">

<div class="page-header">
  <div class="header-right">
    <div>رقم العرض: <span class="bind_quote_number">—</span></div>
    <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
  </div>

  <div class="header-left">
    <strong>RKL للمصاعد والسلالم الكهربائية</strong><br>
    السجل التجاري: 1010709355<br>
    الرقم الضريبي: 302250422600003<br>
    www.rkl.sa – 0114774021
  </div>
</div>



  <div style="display:flex;gap:30px;margin-top:20px;align-items:flex-start">

    <!-- صورة الخريطة -->
    <div style="width:50%">
      <img
        src="/public/images/ksa-map.png"
        alt="RKL Coverage Map"
        style="width:100%;border-radius:10px;border:1px solid #e5e7eb"
      />
      <div style="font-size:11px;color:#6b7280;margin-top:6px;text-align:center">
        التوزيع الجغرافي لأعمال RKL داخل المملكة العربية السعودية
      </div>
    </div>

    <!-- جدول المناطق -->
    <div style="width:50%">
      <h4 style="margin:0 0 10px 0">
        ثالثا ملخص الأعمال حسب المناطق
      </h4>

      <table>
        <thead>
          <tr>
            <th>المنطقة</th>
            <th>Region</th>
            <th>عدد المصاعد</th>
            <th>Elevators</th>
          </tr>
        </thead>
         <tbody>
  <tr>
    <td>421</td>
    <td>421</td>
    <td>Riyadh</td>
    <td>الرياض</td>
  </tr>
  <tr>
    <td>98</td>
    <td>98</td>
    <td>Makkah</td>
    <td>مكة المكرمة</td>
  </tr>
  <tr>
    <td>72</td>
    <td>72</td>
    <td>Eastern Region</td>
    <td>المنطقة الشرقية</td>
  </tr>
  <tr>
    <td>34</td>
    <td>34</td>
    <td>Madinah</td>
    <td>المدينة المنورة</td>
  </tr>
  <tr>
    <td>26</td>
    <td>26</td>
    <td>Qassim</td>
    <td>القصيم</td>
  </tr>
  <tr>
    <td>19</td>
    <td>19</td>
    <td>Tabuk</td>
    <td>تبوك</td>
  </tr>
  <tr>
    <td>17</td>
    <td>17</td>
    <td>Hail</td>
    <td>حائل</td>
  </tr>
  <tr>
    <td>23</td>
    <td>23</td>
    <td>Najran</td>
    <td>نجران</td>
  </tr>
  <tr>
    <td>41</td>
    <td>41</td>
    <td>Asir & Jazan</td>
    <td>عسير وجازان</td>
  </tr>
</tbody>


      </table>
    </div>

  </div>
   <!-- =========================
     الاعتمادات والشراكات
========================= -->
<div class="section-title">الاعتمادات والشراكات الدولية</div>

<p class="section-text">
مؤسسة <strong>RKL للمصاعد والسلالم الكهربائية</strong> معتمدة في توريد وتنفيذ أنظمة المصاعد
من موردين عالميين، وتعمل وفق أعلى معايير الجودة الأوروبية واليابانية،
وبشراكات تقنية مباشرة مع الشركات المصنعة.
</p>

<div class="partners-logos">
  <div class="partner-box">
    <img src="public/images/fuji-logo.png" alt="FUJI Japan">
    <div class="partner-name">FUJI – Japan</div>
    <div class="partner-desc">مصاعد كهربائية – أنظمة MRL & Passenger</div>
  </div>

  <div class="partner-box">
    <img src="public/images/vertilift-logo.png" alt="VertiLift Italy">
    <div class="partner-name">VertiLift – Italy</div>
    <div class="partner-desc">مصاعد أوروبية – حلول حديثة</div>
  </div>
</div>

<!-- نبذة عن المؤسسة والمشاريع -->
<div style="margin-top:20px; border-top:1px solid #e5e7eb; padding-top:15px;">

  <strong>مشاريعنا داخل المملكة العربية السعودية</strong>
  <p style="font-size:12px; line-height:1.6; color:#374151; margin-top:6px;">
    مؤسسة RKL للمصاعد والسلالم الكهربائية هي مؤسسة سعودية متخصصة في توريد،
    تركيب، تحديث، وصيانة المصاعد الكهربائية بمختلف أنواعها. تمتلك المؤسسة خبرة عملية
    واسعة في تنفيذ المشاريع السكنية، التجارية، الطبية، والتعليمية، وقد نفذت أعمالها
    في عدة مناطق داخل المملكة العربية السعودية.
  </p>

  <p style="font-size:12px; line-height:1.6; color:#374151;">
    تضم سابقة أعمال المؤسسة عددًا كبيرًا من المصاعد التي تم تنفيذها وتشغيلها بنجاح،
    مع الالتزام الكامل بمعايير الجودة والسلامة المعتمدة، وتقديم حلول فنية موثوقة
    تتناسب مع متطلبات كل مشروع.
  </p>

  <hr style="border:none;border-top:1px dashed #d1d5db;margin:10px 0">

  <strong>About RKL Projects in Saudi Arabia</strong>
  <p style="font-size:12px; line-height:1.6; color:#374151; margin-top:6px;">
    RKL Elevators & Escalators is a Saudi-based company specialized in the supply,
    installation, modernization, and maintenance of elevators. The company has
    extensive experience in delivering residential, commercial, medical, and
    educational projects across multiple regions within the Kingdom of Saudi Arabia.
  </p>

  <p style="font-size:12px; line-height:1.6; color:#374151;">
    RKL’s portfolio includes a large number of successfully delivered elevators,
    fully compliant with international quality and safety standards, providing
    reliable long-term performance and user comfort.
  </p>

</div>

  <div class="page-index">Page 2</div>
</div>


<!-- ================= صفحة 3: المواصفات الفنية العامة ================= -->
<div class="page">

<div class="page-header">
  <div class="header-right">
    <div>رقم العرض: <span class="bind_quote_number">—</span></div>
    <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
  </div>

  <div class="header-left">
    <strong>RKL للمصاعد والسلالم الكهربائية</strong><br>
    السجل التجاري: 1010709355<br>
    الرقم الضريبي: 302250422600003<br>
    www.rkl.sa – 0114774021
  </div>
</div>

<div class="section-title">رابعاً: المواصفات القياسية الثابتة لنظام المصعد</div>

<table class="info-table">
<thead>
<tr>
  <th style="width:40px">م</th>
  <th>البند</th>
  <th>الوصف</th>
  <th>ملاحظات</th>
</tr>
</thead>

<tbody>

<!-- ===== Drive & Control System ===== -->
<tr><td>1</td><td>Drive System</td><td>VVVF – Variable Voltage Variable Frequency</td><td>تشغيل ناعم واقتصادي</td></tr>
<tr><td>2</td><td>Power Saver</td><td>Included</td><td>توفير استهلاك الطاقة</td></tr>
<tr><td>3</td><td>Anti-vibration & Motion Smoothing</td><td>Included</td><td>تقليل الاهتزاز والضوضاء</td></tr>
<tr><td>4</td><td>Speed Governor</td><td>Included</td><td>مطابق EN81</td></tr>
<tr><td>5</td><td>Overload Protection</td><td>Included</td><td>حماية من زيادة الحمولة</td></tr>
<tr><td>6</td><td>Auto Park Function</td><td>Included</td><td>إيقاف تلقائي عند عدم الاستخدام</td></tr>

<!-- ===== Doors System ===== -->
<tr><td>7</td><td>Door Type</td><td>Automatic</td><td></td></tr>
<tr><td>8</td><td>Door Opening</td><td>Center Opening</td><td></td></tr>
<tr><td>9</td><td>Door Material</td><td>Stainless Steel</td><td>باب الكابينة</td></tr>
<tr><td>10</td><td>Landing Door Material</td><td>Stainless Steel</td><td>أبواب الأدوار</td></tr>

<!-- ===== COP & HOP ===== -->
<tr><td>11</td><td>COP Type</td><td>Hairline Stainless Steel</td><td></td></tr>
<tr><td>12</td><td>COP Buttons</td><td>ANOD / Push Button</td><td></td></tr>
<tr><td>13</td><td>Display</td><td>LCD Display</td><td></td></tr>
<tr><td>14</td><td>Display Size</td><td>4.3 Inch LCD</td><td></td></tr>
<tr><td>15</td><td>Language</td><td>English</td><td></td></tr>
<tr><td>16</td><td>HOP Type</td><td>Hairline Stainless Steel</td><td></td></tr>
<tr><td>17</td><td>Indicators</td><td>Location & Direction Indicator</td><td></td></tr>

<!-- ===== Electrical ===== -->
<tr><td>18</td><td>Power Supply</td><td>380V – 60Hz – 3 Phase</td><td>التغذية الرئيسية</td></tr>
<tr><td>19</td><td>Lighting Power</td><td>220V – 60Hz</td><td>إنارة الكابينة</td></tr>

<!-- ===== Safety Systems ===== -->
<tr><td>20</td><td>ARD</td><td>Automatic Rescue Device</td><td>إنزال تلقائي عند انقطاع التيار</td></tr>
<tr><td>21</td><td>Fireman Key</td><td>Included</td><td>وضع الطوارئ للحريق</td></tr>
<tr><td>22</td><td>Two-way Intercom System</td><td>Included</td><td>اتصال داخلي للطوارئ</td></tr>
<tr><td>23</td><td>Emergency Car Light</td><td>Included</td><td></td></tr>
<tr><td>24</td><td>Emergency Alarm Bell</td><td>Included</td><td></td></tr>
<tr><td>25</td><td>Electric Blower</td><td>Included</td><td>تهوية الكابينة</td></tr>
<tr><td>26</td><td>Fire & Earthquake Sensor Ready</td><td>Included</td><td>جاهز للربط مع أنظمة المبنى</td></tr>
<tr><td>27</td><td>Car Top Safety Guard</td><td>Included (for travel &gt; 450cm)</td><td></td></tr>
<tr><td>28</td><td>Door Lock Monitoring</td><td>Included</td><td></td></tr>
<tr><td>29</td><td>Door Opening Prevention</td><td>Included</td><td>منع الفتح أثناء الحركة</td></tr>
<tr><td>30</td><td>Full Height Sensor</td><td>Included</td><td></td></tr>
<tr><td>31</td><td>Safe Landing System</td><td>Included</td><td></td></tr>
<tr><td>32</td><td>Self-diagnostic Electronic Devices</td><td>Included</td><td>تشخيص الأعطال ذاتياً</td></tr>
<tr><td>33</td><td>Phase / Voltage Protection</td><td>Included</td><td>حماية الجهد والفازات</td></tr>
<tr><td>34</td><td>Buffer in Pit</td><td>Included</td><td></td></tr>
<tr><td>35</td><td>Governor & Safety Gear</td><td>Included</td><td>مطابق EN81</td></tr>

</tbody>
</table>


    <div class="page-index">Page 3</div>
</div>
<!-- ================= صفحة 4: مخطط استرشادي هندسي ================= -->
<div class="page">

<div class="page-header">
  <div class="header-right">
    <div>رقم العرض: <span class="bind_quote_number">—</span></div>
    <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
  </div>

  <div class="header-left">
    <strong>RKL للمصاعد والسلالم الكهربائية</strong><br>
    السجل التجاري: 1010709355<br>
    الرقم الضريبي: 302250422600003<br>
    www.rkl.sa – 0114774021
  </div>
</div>


<div class="section-title">
  خامسًا: مخطط استرشادي هندسي لمقاسات البئر والكابينة (EN81)
</div>

<div style="display:grid; grid-template-columns: 340px 1fr; gap:24px; margin-top:20px">

<table class="tech-table">
  <thead>
    <tr>
      <th>م</th>
      <th>البند</th>
      <th>القيمة (mm)</th>
       <th>الملاحظات</th>
    </tr>
  </thead>
  <tbody>
      <tr>
            <td>1</td>
            <td>مقاس بئر المصعد (mm)</td>
            <td class="bind_dim_shaft">—</td>
            <td>طبقاً لجدول EN81 أو حالة الموقع</td>
        </tr>

       <tr>
            <td>2</td>
            <td>مقاس الكابينة (mm)</td>
            <td class="bind_dim_cabin">—</td>
            <td>طبقاً لجدول EN81 أو التصميم المعتمد</td>
        </tr>

   
       
      </td>
    </tr>

    <tr>
            <td>3</td>
            <td>عمق الحفرة Pit</td>
            <td class="bind_pit">—</td>
            <td></td>
        </tr>
   <tr>
            <td>4</td>
            <td>الابواب </td>
            <td>طبقاً لجدول EN81 أو التصميم المعتمد</td>
            <td></td>
        </tr>

     <tr>
            <td>5</td>
            <td>ارتفاع أعلى البئر OH</td>
            <td class="bind_oh">—</td>
            <td></td>
        </tr>
  </tbody>
</table>


   

  <!-- ✅ المخطط الهندسي -->
<div class="diagram-container" style="display:flex;gap:30px">

<!-- ================= SECTION VIEW ================= -->
<svg width="220" height="420" viewBox="0 0 220 420"
     style="border:1px solid #cbd5e1;background:#fff">

  <!-- Shaft -->
  <rect x="60" y="40" width="100" height="320"
        fill="none" stroke="#0f172a" stroke-width="2"/>

  <!-- Cabin -->
  <rect x="80" y="140" width="60" height="120"
        fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>

  <!-- Labels -->
  <text x="110" y="30" text-anchor="middle" font-size="12" font-weight="600">
    SECTION VIEW
  </text>

  <text x="110" y="205" text-anchor="middle" font-size="11">CABIN</text>

  <!-- PIT -->
  <line x1="60" y1="360" x2="160" y2="360" stroke="#0f172a"/>
  <text x="110" y="390" text-anchor="middle" font-size="11">
    PIT = 1200 mm
  </text>

  <!-- OH -->
  <line x1="60" y1="40" x2="160" y2="40" stroke="#0f172a"/>
  <text x="110" y="20" text-anchor="middle" font-size="11">
    OH = 3500 mm
  </text>
</svg>

<!-- ================= PLAN VIEW ================= -->
<svg width="220" height="220" viewBox="0 0 220 220"
     style="border:1px solid #cbd5e1;background:#fff">

  <!-- Shaft -->
  <rect x="40" y="40" width="140" height="140"
        fill="none" stroke="#0f172a" stroke-width="2"/>

  <!-- Cabin -->
  <rect x="70" y="70" width="80" height="80"
        fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>

  <text x="110" y="30" text-anchor="middle" font-size="12" font-weight="600">
    PLAN VIEW
  </text>

  <text x="110" y="115" text-anchor="middle" font-size="11">
    CABIN
  </text>

  <text x="110" y="200" text-anchor="middle" font-size="11">
    HW = 1700 mm | HD = 1500 mm
  </text>
</svg>

</div>


</div>




</div>




   

  <div class="page-index">Page 4</div>
</div>

<!-- ================= صفحة 5: ميزات الأمان + مخطط المقاسات ================= -->
<div class="page">

<div class="page-header">
  <div class="header-right">
    <div>رقم العرض: <span class="bind_quote_number">—</span></div>
    <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
  </div>

  <div class="header-left">
    <strong>RKL للمصاعد والسلالم الكهربائية</strong><br>
    السجل التجاري: 1010709355<br>
    الرقم الضريبي: 302250422600003<br>
    www.rkl.sa – 0114774021
  </div>
</div>


<p style="font-size:12px; line-height:1.7; color:#374151; margin-bottom:10px">
يعتمد تصميم ومقاسات بئر المصعد والكابينة الواردة في هذا العرض على
<strong>المعايير الأوروبية EN81</strong> المعتمدة دوليًا.
وبناءً عليه، فإن المصعد المختار من قبل العميل سيتم تنفيذه بمقاسات
مطابقة لجدول الاعتماد الدولي EN81 أو بما يتوافق مع حالة الموقع والمخططات
التنفيذية المعتمدة، دون الإخلال بمتطلبات السلامة أو الأداء.
</p>

   <div class="section-title">
ملحق (ب): جدول المقاسات القياسية المعتمدة حسب EN81
</div>

<table>
  <thead>
    <tr>
      <th>الحمولة (kg)</th>
      <th>مقاس الكابينة (mm)</th>
      <th>مقاس البئر المطلوب (mm)</th>
      <th>عرض باب المصعد (mm)</th>
      <th>عمق الحفرة (Pit)</th>
      <th>ارتفاع أعلى البئر (OH)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>450</td>
      <td>1100 × 1000</td>
      <td>1700 × 1500</td>
      <td>700</td>
      <td>1200</td>
      <td>3500</td>
    </tr>
    <tr>
      <td>630</td>
      <td>1400 × 1100</td>
      <td>1800 × 1600</td>
      <td>800</td>
      <td>1200</td>
      <td>3500</td>
    </tr>
    <tr>
      <td>800</td>
      <td>1400 × 1350</td>
      <td>2000 × 1600</td>
      <td>900</td>
      <td>1300</td>
      <td>3600</td>
    </tr>
    <tr>
      <td>1000</td>
      <td>1500 × 1600</td>
      <td>2200 × 1800</td>
      <td>900</td>
      <td>1400</td>
      <td>3700</td>
    </tr>
    <tr>
      <td>1275</td>
      <td>1600 × 1800</td>
      <td>2400 × 1900</td>
      <td>1100</td>
      <td>1400</td>
      <td>3800</td>
    </tr>
    <tr>
      <td>1600</td>
      <td>2000 × 1800</td>
      <td>2600 × 2400</td>
      <td>1100</td>
      <td>1500</td>
      <td>4000</td>
    </tr>
  </tbody>
</table>

   <p style="font-size:11px; color:#6b7280; margin-top:8px">
جميع القيم الواردة في الجدول أعلاه هي قيم إرشادية وفق معيار EN81،
وتخضع للتعديل بما يتوافق مع حالة الموقع والمخططات التنفيذية النهائية
(Final Shop Drawings) المعتمدة من الاستشاري والجهات المختصة.
</p>


<div class="page-index">Page 5</div>
</div>


<!-- ================= صفحة 6: القيمة المالية + الدفعات + البنود ================= -->
<div class="page">

 <div class="page-header">
  <div class="header-right">
    <div>رقم العرض: <span class="bind_quote_number">—</span></div>
    <div>تاريخ العرض: <span class="bind_offer_date">—</span></div>
  </div>

  <div class="header-left">
    <strong>RKL للمصاعد والسلالم الكهربائية</strong><br>
    السجل التجاري: 1010709355<br>
    الرقم الضريبي: 302250422600003<br>
    www.rkl.sa – 0114774021
  </div>
</div>

  <div class="section-title">سابعا ملخص القيمة المالية</div>
<div class="before-vat-adjustment">

  <div class="section-title">
    ٦-١) تعديل السعر قبل الضريبة (اختياري)
  </div>

  <table>
    <tbody>
      <tr>
        <th style="width:35%">نوع التعديل</th>
        <td style="width:65%">
          <select id="adjust_type">
            <option value="">— بدون تعديل —</option>
            <option value="percent_add">زيادة بنسبة (%)</option>
            <option value="percent_minus">خصم بنسبة (%)</option>
            <option value="fixed_add">زيادة بمبلغ ثابت</option>
            <option value="fixed_minus">خصم بمبلغ ثابت</option>
          </select>
        </td>
      </tr>

      <tr>
        <th>قيمة التعديل</th>
        <td>
          <input
            type="number"
            id="adjust_value"
            placeholder="أدخل النسبة أو المبلغ"
            style="width:100%"
          />
          <div class="small-note">
            * يتم احتساب التعديل على المبلغ قبل الضريبة فقط
          </div>
        </td>
      </tr>
    </tbody>
  </table>

</div>



    <div class="section-title">٧) جدول الدفعات المقترح</div>
<table>
  <thead>
    <tr>
      <th style="width:45%">البيان</th>
      <th style="width:15%">النسبة</th>
      <th style="width:40%">المبلغ بالريال السعودي</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>عند توقيع العقد</td>
      <td>50%</td>
      <td class="bind_pay_50">—</td>
    </tr>
    <tr>
      <td>عند الانتهاء من الأعمال الميكانيكية</td>
      <td>25%</td>
      <td class="bind_pay_25">—</td>
    </tr>
    <tr>
      <td>بعد الانتهاء من الأعمال الكهربائية والتشغيل</td>
      <td>20%</td>
      <td class="bind_pay_20">—</td>
    </tr>
    <tr>
      <td>عند التسليم النهائي للمصعد</td>
      <td>5%</td>
      <td class="bind_pay_5">—</td>
    </tr>

    <!-- ✅ ملخص مالي تفصيلي -->
    <tr>
      <th>الإجمالي قبل التعديل (قبل الضريبة)</th>
      <th>—</th>
      <th class="bind_subtotal_before_vat">—</th>
    </tr>

    <tr>
      <th>قيمة الخصم / الزيادة</th>
      <th>—</th>
      <th class="bind_adjustment_amount">—</th>
    </tr>

    <tr>
      <th>الإجمالي بعد التعديل (قبل الضريبة)</th>
      <th>—</th>
      <th class="bind_subtotal_after_adjustment">—</th>
    </tr>

    <tr>
      <th>ضريبة القيمة المضافة (15%)</th>
      <th>—</th>
      <th class="bind_vat_amount">—</th>
    </tr>

    <tr>
      <th style="background:#f0f9ff;font-weight:bold">
        الإجمالي النهائي (شامل ضريبة القيمة المضافة)
      </th>
      <th>100%</th>
      <th class="bind_total_with_vat" style="font-weight:bold">—</th>
    </tr>
  </tbody>
</table>


    <div class="section-title">٨) بنود رئيسية للعقد (قابلة للتعديل)</div>
    <div class="terms editable" contenteditable="true">
        <p>١- يعتبر هذا العرض جزءًا لا يتجزأ من عقد توريد وتركيب وتشغيل المصعد في حال اعتماده والتوقيع عليه من قبل الطرفين.</p>
        <p>٢- الأسعار الواردة أعلاه بالريال السعودي وتشمل ضريبة القيمة المضافة بنسبة ١٥٪ ما لم يُذكر خلاف ذلك.</p>
        <p>٣- يلتزم الطرف الأول بتوفير التغذية الكهربائية ٣ فاز ٣٨٠ فولت وأعمال البئر والأبواب المدنية حسب المخططات المعتمدة.</p>
        <p>٤- يلتزم الطرف الثاني بتنفيذ الأعمال وفق المواصفات الفنية المعتمدة والشروط الواردة في هذا العرض.</p>
        <p>٥- في حال تأخر الدفعات عن مواعيدها يحق للطرف الثاني إيقاف الأعمال مؤقتًا إلى حين استلام المستحقات دون مسؤولية عن التأخير.</p>
        <p>٦- في حال حدوث أي نزاع - لا قدر الله - تكون ولاية القضاء للمحاكم المختصة في المملكة العربية السعودية.</p>
        <p>٧- يعتبر العرض لاغيًا إذا لم يتم توقيعه وسداد الدفعة الأولى خلال مدة سريان العرض المتفق عليها.</p>
    </div>

<!-- زر طباعة عام -->
<div style="text-align:center; margin-top:10px;">
  <button class="btn-print" onclick="printWithName()">طباعة / حفظ PDF</button>
    <div id="warn_no_data" class="warning" style="display:none;">
      لم يتم العثور على عرض سعر محفوظ في السجل. الرجاء العودة إلى نموذج التسعير وحفظ عرض السعر أولاً.
    </div>
</div>

   
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script src="/public/rkl-map.js"></script>
<script src="/public/rkl-summary.js"></script>



<script>
/* =================================================
   Helper: bind text safely
================================================= */
const bind = (selector, value) => {
  const el = document.querySelector(selector);
  if (el) el.textContent = (value !== undefined && value !== null && value !== '') ? value : '—';
};

/* =================================================
   تحميل عرض السعر من LocalStorage
================================================= */
const quotes = JSON.parse(localStorage.getItem('rkl_quotes') || '[]');
const currentIndex = localStorage.getItem('rkl_current_quote_index');
const q = quotes[currentIndex ?? quotes.length - 1];

if (!q) {
  alert('لا يوجد عرض سعر لعرضه');
}

/* =================================================
   (1) بيانات العرض العامة
================================================= */
bind('.bind_quote_number', q.quoteNumber);
bind('.bind_offer_date', q.timestamp?.slice(0, 10));
bind('.bind_customer_name', q.customerName);
   bind('.bind_project_location', q.projectLocation || '—');
bind('.bind_project_name',q.projectName + (q.projectLocation ? ' – ' + q.projectLocation : ''));

/* =================================================
   (2) ملف العميل – بيانات محسوبة من عرض السعر
================================================= */
bind('.bind_customer_name', q.customerName);
bind('.bind_project_name',q.projectName + (q.projectLocation ? ' – ' + q.projectLocation : ''));
bind('.bind_contact_person', q.customerDetails?.contact_person || '—');
bind('.bind_cr_number', q.customerDetails?.cr_number || '—');
bind('.bind_tax_number', q.customerDetails?.tax_number || '—');

/* ===== بيانات المصعد ===== */
bind('.bind_brand', q.brandLabel);
bind('.bind_capacity', q.capacity);
bind('.bind_speed', q.speed);
bind('.bind_floors', q.floors);
bind('.bind_lifts', q.liftsCount);

/* ===== عناصر ذكية جديدة ===== */
bind('.bind_travel_height', q.travelHeight ? (q.travelHeight + ' mm') : '—');

bind(
  '.bind_preferred_contact',
  q.customerDetails?.preferred_contact || 'جوال'
);
;


/* =================================================
   (3) البيانات الفنية الرئيسية – ربط نهائي صحيح
================================================= */

bind('.bind_brand', q.brandLabel);                 // ماركة المصعد / النظام
bind('.bind_usage', inferUsage(q.projectName));   // الاستخدام
bind('.bind_capacity', q.capacity);               // الحمولة
bind('.bind_speed', q.speed);                     // السرعة
bind('.bind_stops', q.stops);                     // عدد التوقفات
bind('.bind_lifts', q.liftsCount);                // عدد المصاعد
bind('.bind_machine_type', q.machineType);        // نوع الماكينة

bind('.bind_cabin_design', q.cabinDesign);        // تشطيب داخلي
bind('.bind_floor_finish', q.floorFinish);        // أرضية الكابينة

bind('.bind_dim_shaft', q.shaftSize);              // مقاس البئر
bind('.bind_dim_cabin', q.cabinSize);              // مقاس الكابينة

bind('.bind_pit', q.pit);                          // PIT
bind('.bind_oh', q.oh);                            // OH

bind('.bind_fh', q.floorHeight);                   // FH
bind('.bind_th', q.travelHeight);                  // TH



/* =================================================
   Helper: format currency (SAR)
================================================= */
function formatCurrency(value) {
  const v = Number(value) || 0;
  return v.toLocaleString('en-US', {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  }) + ' SAR';
}

/* =================================================
   (5 + 6 + 6-1 + 7) الحساب المالي الكامل
================================================= */

// ✅ الإجمالي الشامل القادم من سجل عروض الأسعار
const grandTotal = Number(q.totalWithVat || 0);

// ✅ عدد المصاعد
const units = Number(q.liftsCount || 1);

// ✅ نسبة الضريبة
const vatRate = Number(q.vatRate || 15);

   /* =================================================
   مخطط المقاسات – فك القيم بالأرقام
================================================= */

// Cabin: "1100 x 1000"
if (q.cabinSize) {
  const [cw, cd] = q.cabinSize.split('x').map(v => v.trim());
  bind('.bind_cabin_width', cw);
  bind('.bind_cabin_depth', cd);
}

// Shaft: "1700 x 1500"
if (q.shaftSize) {
  const [sw, sd] = q.shaftSize.split('x').map(v => v.trim());
 // لازم تكون القيمة: "1700 x 1500"
q.shaftSize = "1700 x 1500";
q.cabinSize = "1100 x 1000";

}

// Door: "700 x 2100" أو "700"
if (q.doorSize) {
  const [dw, dh] = q.doorSize.split('x').map(v => v.trim());
  bind('.bind_door_width', dw);
  bind('.bind_door_height', dh || '—');
}


// ✅ السعر قبل الضريبة (عكسي)
const baseSubtotal = grandTotal / (1 + vatRate / 100);

function recalcFinancialSummary() {
  const type  = document.getElementById('adjust_type')?.value || '';
  const value = Number(document.getElementById('adjust_value')?.value || 0);

  let adjustedSubtotal = baseSubtotal;

  if (type === 'percent_add') {
    adjustedSubtotal += baseSubtotal * (value / 100);
  } else if (type === 'percent_minus') {
    adjustedSubtotal -= baseSubtotal * (value / 100);
  } else if (type === 'fixed_add') {
    adjustedSubtotal += value;
  } else if (type === 'fixed_minus') {
    adjustedSubtotal -= value;
  }

  const vatAmount  = adjustedSubtotal * (vatRate / 100);
  const finalTotal = adjustedSubtotal + vatAmount;

  // ✅ الملخص
  bind('.bind_subtotal_before_vat', formatCurrency(baseSubtotal));
  bind('.bind_adjustment_amount', formatCurrency(adjustedSubtotal - baseSubtotal));
  bind('.bind_subtotal_after_adjustment', formatCurrency(adjustedSubtotal));
  bind('.bind_vat_amount', formatCurrency(vatAmount));
  bind('.bind_total_with_vat', formatCurrency(finalTotal));

  // ✅ جدول الدفعات
  bind('.bind_pay_50', formatCurrency(finalTotal * 0.50));
  bind('.bind_pay_25', formatCurrency(finalTotal * 0.25));
  bind('.bind_pay_20', formatCurrency(finalTotal * 0.20));
  bind('.bind_pay_5',  formatCurrency(finalTotal * 0.05));
}


/* ✅ تشغيل أولي */
recalcFinancialSummary();

/* ✅ إعادة الحساب عند أي تعديل */
document.getElementById('adjust_type')?.addEventListener('change', recalcFinancialSummary);
document.getElementById('adjust_value')?.addEventListener('input', recalcFinancialSummary);
</script>


<script>
function renderPricingTable(q) {
  const tbody = document.querySelector("#pricing-table tbody");
  if (!tbody || !q.items) return;

  tbody.innerHTML = "";

  q.items.forEach(item => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${item.description}</td>
      <td style="text-align:center">${item.quantity}</td>
      <td>${item.unitPrice.toLocaleString()} SAR</td>
      <td>${item.total.toLocaleString()} SAR</td>
    `;
    tbody.appendChild(tr);
  });

  document.querySelector(".bind_subtotal").textContent =
    q.subtotal.toLocaleString() + " SAR";

  document.querySelector(".bind_vat").textContent =
    q.vatAmount.toLocaleString() + " SAR";

  document.querySelector(".bind_total").textContent =
    q.totalWithVat.toLocaleString() + " SAR";
}
</script>
<script>
function renderPayments(q) {
  const tbody = document.querySelector("#payments-table tbody");
  if (!tbody || !q.payments) return;

  tbody.innerHTML = "";

  q.payments.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.label}</td>
      <td style="text-align:center">${p.percent}%</td>
      <td>${p.amount.toLocaleString()} SAR</td>
    `;
    tbody.appendChild(tr);
  });
}
</script>

<script>
function syncEditableFieldsToStorage() {
  const index = localStorage.getItem('rkl_current_quote_index');
  if (index === null) return;

  const quotes = JSON.parse(localStorage.getItem('rkl_quotes') || '[]');
  const q = quotes[index];
  if (!q) return;

  // ✅ البيانات المعدلة يدويًا
  q.brandLabel   = document.querySelector('.bind_brand')?.textContent?.trim() || q.brandLabel;
  q.capacity     = document.querySelector('.bind_capacity')?.textContent?.trim() || q.capacity;
  q.speed        = document.querySelector('.bind_speed')?.textContent?.trim() || q.speed;
  q.floors       = document.querySelector('.bind_floors')?.textContent?.trim() || q.floors;
  q.cabinSize    = document.querySelector('.bind_dim_cabin')?.textContent?.trim() || q.cabinSize;
  q.shaftSize    = document.querySelector('.bind_dim_shaft')?.textContent?.trim() || q.shaftSize;
  q.pit          = document.querySelector('.bind_pit')?.textContent?.trim() || q.pit;
  q.oh           = document.querySelector('.bind_oh')?.textContent?.trim() || q.oh;

  quotes[index] = q;
  localStorage.setItem('rkl_quotes', JSON.stringify(quotes));
}
</script>


<script>
function printWithName() {
  syncEditableFieldsToStorage();

  const quoteNo = document.querySelector('.bind_quote_number')?.textContent?.trim() || 'quotation';
  const cleanNo = quoteNo.replace(/[^\w\d-]/g, '');

  document.title = `RKL_Quotation_${cleanNo}`;
  window.print();

  setTimeout(() => {
    document.title = 'RKL Elevator Offer';
  }, 1000);
}

</script>

   <script>
(function () {

  const idx = localStorage.getItem('rkl_current_quote_index');
  if (idx === null) return;

  const quotes = JSON.parse(localStorage.getItem('rkl_quotes') || '[]');
  const q = quotes[Number(idx)];
  if (!q) return;

  const bind = (selector, value) => {
    const el = document.querySelector(selector);
    if (el) el.textContent = value ?? '—';
  };

  /* ===============================
     Page 1 + Headers
  =============================== */
  bind('.bind_quote_number', q.quoteNumber);
  bind('.bind_offer_date', q.timestamp?.slice(0,10));
  bind('.bind_customer_name', q.customerName);
  bind('.bind_project_name', q.projectName);
  bind('.bind_project_location', q.projectLocation);

  /* ===============================
     Page 3 – البيانات الفنية الرئيسية
  =============================== */
  bind('.bind_brand', q.brandLabel);
  bind('.bind_usage', 'Passenger Elevator');

  // بلد المنشأ حسب الماركة
  const origin =
    q.brandLabel?.includes('FUJI') ? 'Japan' :
    q.brandLabel?.includes('VERTILIFT') ? 'Italy' : '—';
  bind('.bind_origin', origin);

  bind('.bind_capacity', q.capacity);
  bind('.bind_speed', q.speed);
  bind('.bind_floors', q.floors);
  bind('.bind_lifts', q.liftsCount);

  bind('.bind_machine_type', 'MRL – Machine Room Less');

  bind('.bind_cabin_design', q.cabinDesign);
  bind('.bind_floor_finish', q.floorFinish);

  bind('.bind_dim_shaft', q.shaftSize);
  bind('.bind_dim_cabin', q.cabinSize);

  bind('.bind_pit', q.pit);
  bind('.bind_oh', q.oh);

  bind('.bind_floor_height', q.floorHeight);
  bind('.bind_travel_height', q.travelHeight);

})();
</script>




</body>
</html>














































































